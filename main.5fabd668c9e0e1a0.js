"use strict";(self.webpackChunkblokus=self.webpackChunkblokus||[]).push([[179],{774:(Bs,Di,Ee)=>{function ue(e){return"function"==typeof e}function Zt(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const wi=Zt(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function cr(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Je{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ue(r))try{r()}catch(s){t=s instanceof wi?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Of(s)}catch(o){t=t??[],o instanceof wi?t=[...t,...o.errors]:t.push(o)}}if(t)throw new wi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Of(t);else{if(t instanceof Je){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&cr(n,t)}remove(t){const{_finalizers:n}=this;n&&cr(n,t),t instanceof Je&&t._removeParent(this)}}Je.EMPTY=(()=>{const e=new Je;return e.closed=!0,e})();const Vs=Je.EMPTY;function Hs(e){return e instanceof Je||e&&"closed"in e&&ue(e.remove)&&ue(e.add)&&ue(e.unsubscribe)}function Of(e){ue(e)?e():e.unsubscribe()}const Ln={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Us={setTimeout(e,t,...n){const{delegate:r}=Us;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Us;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xf(e){Us.setTimeout(()=>{const{onUnhandledError:t}=Ln;if(!t)throw e;t(e)})}function Rf(){}const qw=rl("C",void 0,void 0);function rl(e,t,n){return{kind:e,value:t,error:n}}let jn=null;function zs(e){if(Ln.useDeprecatedSynchronousErrorHandling){const t=!jn;if(t&&(jn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=jn;if(jn=null,n)throw r}}else e()}class il extends Je{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Hs(t)&&t.add(this)):this.destination=Jw}static create(t,n,r){return new bi(t,n,r)}next(t){this.isStopped?ol(function Ww(e){return rl("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ol(function Gw(e){return rl("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ol(qw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qw=Function.prototype.bind;function sl(e,t){return Qw.call(e,t)}class Zw{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){qs(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){qs(r)}else qs(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){qs(n)}}}class bi extends il{constructor(t,n,r){let i;if(super(),ue(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ln.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&sl(t.next,s),error:t.error&&sl(t.error,s),complete:t.complete&&sl(t.complete,s)}):i=t}this.destination=new Zw(i)}}function qs(e){Ln.useDeprecatedSynchronousErrorHandling?function Kw(e){Ln.useDeprecatedSynchronousErrorHandling&&jn&&(jn.errorThrown=!0,jn.error=e)}(e):xf(e)}function ol(e,t){const{onStoppedNotification:n}=Ln;n&&Us.setTimeout(()=>n(e,t))}const Jw={closed:!0,next:Rf,error:function Yw(e){throw e},complete:Rf},al="function"==typeof Symbol&&Symbol.observable||"@@observable";function ll(e){return e}let Fe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function eb(e){return e&&e instanceof il||function Xw(e){return e&&ue(e.next)&&ue(e.error)&&ue(e.complete)}(e)&&Hs(e)}(n)?n:new bi(n,r,i);return zs(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Lf(r))((i,s)=>{const o=new bi({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[al](){return this}pipe(...n){return function Ff(e){return 0===e.length?ll:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Lf(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function Lf(e){var t;return null!==(t=e??Ln.Promise)&&void 0!==t?t:Promise}const tb=Zt(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Gs=(()=>{class e extends Fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new jf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tb}next(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Vs:(this.currentObservers=null,s.push(n),new Je(()=>{this.currentObservers=null,cr(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Fe;return n.source=this,n}}return e.create=(t,n)=>new jf(t,n),e})();class jf extends Gs{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Vs}}function yn(e){return t=>{if(function nb(e){return ue(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function vn(e,t,n,r,i){return new rb(e,t,n,r,i)}class rb extends il{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function _n(e){return this instanceof _n?(this.v=e,this):new _n(e)}function Hf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function fl(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=e[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Uf=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function zf(e){return ue(e?.then)}function qf(e){return ue(e[al])}function Gf(e){return Symbol.asyncIterator&&ue(e?.[Symbol.asyncIterator])}function Wf(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Kf=function Ib(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Qf(e){return ue(e?.[Kf])}function Zf(e){return function Vf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof _n?Promise.resolve(f.value.v).then(u,c):d(s[0][2],f)}(r[f](h))}catch(p){d(s[0][3],p)}}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield _n(n.read());if(i)return yield _n(void 0);yield yield _n(r)}}finally{n.releaseLock()}})}function Yf(e){return ue(e?.getReader)}function Yt(e){if(e instanceof Fe)return e;if(null!=e){if(qf(e))return function Tb(e){return new Fe(t=>{const n=e[al]();if(ue(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Uf(e))return function Mb(e){return new Fe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(zf(e))return function Ab(e){return new Fe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xf)})}(e);if(Gf(e))return Jf(e);if(Qf(e))return function Nb(e){return new Fe(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Yf(e))return function Pb(e){return Jf(Zf(e))}(e)}throw Wf(e)}function Jf(e){return new Fe(t=>{(function kb(e,t){var n,r,i,s;return function $f(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Hf(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Dn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Xf(e,t,n=1/0){return ue(t)?Xf((r,i)=>function ib(e,t){return yn((n,r)=>{let i=0;n.subscribe(vn(r,s=>{r.next(e.call(t,s,i++))}))})}((s,o)=>t(r,s,i,o))(Yt(e(r,i))),n):("number"==typeof t&&(n=t),yn((r,i)=>function Ob(e,t,n,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=g=>u<r?p(g):l.push(g),p=g=>{s&&t.next(g),u++;let m=!1;Yt(n(g,c++)).subscribe(vn(t,_=>{i?.(_),s?h(_):t.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const _=l.shift();o?Dn(t,o,()=>p(_)):p(_)}f()}catch(_){t.error(_)}}))};return e.subscribe(vn(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const eh=new Fe(e=>e.complete());function th(e){return e&&ue(e.schedule)}function hl(e){return e[e.length-1]}function nh(e){return th(hl(e))?e.pop():void 0}function rh(e,t=0){return yn((n,r)=>{n.subscribe(vn(r,i=>Dn(r,e,()=>r.next(i),t),()=>Dn(r,e,()=>r.complete(),t),i=>Dn(r,e,()=>r.error(i),t)))})}function ih(e,t=0){return yn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function sh(e,t){if(!e)throw new Error("Iterable cannot be null");return new Fe(n=>{Dn(n,t,()=>{const r=e[Symbol.asyncIterator]();Dn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function oh(e,t){return t?function Hb(e,t){if(null!=e){if(qf(e))return function Lb(e,t){return Yt(e).pipe(ih(t),rh(t))}(e,t);if(Uf(e))return function $b(e,t){return new Fe(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(zf(e))return function jb(e,t){return Yt(e).pipe(ih(t),rh(t))}(e,t);if(Gf(e))return sh(e,t);if(Qf(e))return function Bb(e,t){return new Fe(n=>{let r;return Dn(n,t,()=>{r=e[Kf](),Dn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}(e,t);if(Yf(e))return function Vb(e,t){return sh(Zf(e),t)}(e,t)}throw Wf(e)}(e,t):Yt(e)}function Ub(...e){const t=nh(e),n=function Fb(e,t){return"number"==typeof hl(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Yt(r[0]):function xb(e=1/0){return Xf(ll,e)}(n)(oh(r,t)):eh}class Ot extends Gs{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function ah(e={}){const{connector:t=(()=>new Gs),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=l=void 0,c=d=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return yn((g,m)=>{u++,!d&&!c&&f();const _=l=l??t();m.add(()=>{u--,0===u&&!d&&!c&&(a=pl(p,i))}),_.subscribe(m),!o&&u>0&&(o=new bi({next:y=>_.next(y),error:y=>{d=!0,f(),a=pl(h,n,y),_.error(y)},complete:()=>{c=!0,f(),a=pl(h,r),_.complete()}}),Yt(g).subscribe(o))})(s)}}function pl(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new bi({next:()=>{r.unsubscribe(),e()}});return Yt(t(...n)).subscribe(r)}function Wb(e,t){return e===t}function Y(e){for(let t in e)if(e[t]===Y)return t;throw Error("Could not find renamed property on target object.")}function De(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(De).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function gl(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Kb=Y({__forward_ref__:Y});function ml(e){return e.__forward_ref__=ml,e.toString=function(){return De(this())},e}function k(e){return function yl(e){return"function"==typeof e&&e.hasOwnProperty(Kb)&&e.__forward_ref__===ml}(e)?e():e}function vl(e){return e&&!!e.\u0275providers}class w extends Error{constructor(t,n){super(function Ks(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function x(e){return"string"==typeof e?e:null==e?"":String(e)}function _l(e,t){throw new w(-201,!1)}function ct(e,t){null==e&&function N(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function q(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Bn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Qs(e){return uh(e,Ys)||uh(e,ch)}function uh(e,t){return e.hasOwnProperty(t)?e[t]:null}function Zs(e){return e&&(e.hasOwnProperty(Dl)||e.hasOwnProperty(tE))?e[Dl]:null}const Ys=Y({\u0275prov:Y}),Dl=Y({\u0275inj:Y}),ch=Y({ngInjectableDef:Y}),tE=Y({ngInjectorDef:Y});var V=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(V||{});let wl;function qe(e){const t=wl;return wl=e,t}function fh(e,t,n){const r=Qs(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&V.Optional?null:void 0!==t?t:void _l(De(e))}const ee=globalThis;class O{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ei={},Il="__NG_DI_FLAG__",Js="ngTempTokenPath",iE=/\n/gm,ph="__source";let dr;function wn(e){const t=dr;return dr=e,t}function aE(e,t=V.Default){if(void 0===dr)throw new w(-203,!1);return null===dr?fh(e,void 0,t):dr.get(e,t&V.Optional?null:void 0,t)}function F(e,t=V.Default){return(function dh(){return wl}()||aE)(k(e),t)}function te(e,t=V.Default){return F(e,Xs(t))}function Xs(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Tl(e){const t=[];for(let n=0;n<e.length;n++){const r=k(e[n]);if(Array.isArray(r)){if(0===r.length)throw new w(900,!1);let i,s=V.Default;for(let o=0;o<r.length;o++){const a=r[o],l=lE(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(F(i,s))}else t.push(F(r))}return t}function Ci(e,t){return e[Il]=t,e.prototype[Il]=t,e}function lE(e){return e[Il]}function Jt(e){return{toString:e}.toString()}var eo=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(eo||{}),dt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(dt||{});const xt={},W=[],to=Y({\u0275cmp:Y}),Ml=Y({\u0275dir:Y}),Al=Y({\u0275pipe:Y}),mh=Y({\u0275mod:Y}),Xt=Y({\u0275fac:Y}),Si=Y({__NG_ELEMENT_ID__:Y}),yh=Y({__NG_ENV_ID__:Y});function vh(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function Nl(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];Dh(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function _h(e){return 3===e||4===e||6===e}function Dh(e){return 64===e.charCodeAt(0)}function Ii(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||wh(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function wh(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}const bh="ng-template";function dE(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==vh(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Eh(e){return 4===e.type&&e.value!==bh}function fE(e,t,n){return t===(4!==e.type||n?e.value:bh)}function hE(e,t,n){let r=4;const i=e.attrs||[],s=function mE(e){for(let t=0;t<e.length;t++)if(_h(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!fE(e,l,n)||""===l&&1===t.length){if(bt(r))return!1;o=!0}}else{const u=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!dE(e.attrs,u,n)){if(bt(r))return!1;o=!0}continue}const d=pE(8&r?"class":l,i,Eh(e),n);if(-1===d){if(bt(r))return!1;o=!0;continue}if(""!==u){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==vh(h,u,0)||2&r&&u!==f){if(bt(r))return!1;o=!0}}}}else{if(!o&&!bt(r)&&!bt(l))return!1;if(o&&bt(l))continue;o=!1,r=l|1&r}}return bt(r)||o}function bt(e){return 0==(1&e)}function pE(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function yE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ch(e,t,n=!1){for(let r=0;r<t.length;r++)if(hE(e,t[r],n))return!0;return!1}function Sh(e,t){return e?":not("+t.trim()+")":t}function _E(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!bt(o)&&(t+=Sh(s,i),i=""),r=o,s=s||!bt(r);n++}return""!==i&&(t+=Sh(s,i)),t}function fr(e){return Jt(()=>{const t=Mh(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===eo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||dt.Emulated,styles:e.styles||W,_:null,schemas:e.schemas||null,tView:null,id:""};Ah(n);const r=e.dependencies;return n.directiveDefs=no(r,!1),n.pipeDefs=no(r,!0),n.id=function IE(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function bE(e){return H(e)||Se(e)}function EE(e){return null!==e}function hr(e){return Jt(()=>({type:e.type,bootstrap:e.bootstrap||W,declarations:e.declarations||W,imports:e.imports||W,exports:e.exports||W,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Th(e,t){if(null==e)return xt;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function ft(e){return Jt(()=>{const t=Mh(e);return Ah(t),t})}function H(e){return e[to]||null}function Se(e){return e[Ml]||null}function Le(e){return e[Al]||null}function Mh(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||xt,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||W,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Th(e.inputs,t),outputs:Th(e.outputs)}}function Ah(e){e.features?.forEach(t=>t(e))}function no(e,t){if(!e)return null;const n=t?Le:bE;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(EE)}const fe=0,C=1,j=2,ae=3,Et=4,Mi=5,Ae=6,pr=7,pe=8,bn=9,gr=10,R=11,Ai=12,Nh=13,mr=14,ge=15,Ni=16,yr=17,Rt=18,Pi=19,Ph=20,En=21,en=22,ki=23,Oi=24,$=25,Pl=1,kh=2,Ft=7,vr=9,Ie=11;function We(e){return Array.isArray(e)&&"object"==typeof e[Pl]}function je(e){return Array.isArray(e)&&!0===e[Pl]}function kl(e){return 0!=(4&e.flags)}function Vn(e){return e.componentOffset>-1}function io(e){return 1==(1&e.flags)}function Ct(e){return!!e.template}function Ol(e){return 0!=(512&e[j])}function Hn(e,t){return e.hasOwnProperty(Xt)?e[Xt]:null}let Te=null,so=!1;function ht(e){const t=Te;return Te=e,t}const Rh={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Lh(e){if(!Ri(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Bh(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function $h(e){e.dirty=!0,function jh(e){if(void 0===e.liveConsumerNode)return;const t=so;so=!0;try{for(const n of e.liveConsumerNode)n.dirty||$h(n)}finally{so=t}}(e),e.consumerMarkedDirty?.(e)}function Rl(e){return e&&(e.nextProducerIndex=0),ht(e)}function Fl(e,t){if(ht(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Ri(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)oo(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Bh(e){_r(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Lh(n),r!==n.version))return!0}return!1}function Vh(e){if(_r(e),Ri(e))for(let t=0;t<e.producerNode.length;t++)oo(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function oo(e,t){if(function Uh(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),_r(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)oo(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];_r(i),i.producerIndexOfThis[r]=t}}function Ri(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function _r(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let zh=null;const Kh=()=>{},$E=(()=>({...Rh,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Kh}))();class BE{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Qh(e){return e.type.prototype.ngOnChanges&&(e.setInput=HE),VE}function VE(){const e=Yh(this),t=e?.current;if(t){const n=e.previous;if(n===xt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function HE(e,t,n,r){const i=this.declaredInputs[n],s=Yh(e)||function UE(e,t){return e[Zh]=t}(e,{previous:xt,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new BE(l&&l.currentValue,t,a===xt),e[r]=t}const Zh="__ngSimpleChanges__";function Yh(e){return e[Zh]||null}const Lt=function(e,t,n){};function ne(e){for(;Array.isArray(e);)e=e[fe];return e}function lo(e,t){return ne(t[e])}function Ke(e,t){return ne(t[e.index])}function ep(e,t){return e.data[t]}function tt(e,t){const n=t[e];return We(n)?n:n[fe]}function Sn(e,t){return null==t?null:e[t]}function tp(e){e[yr]=0}function QE(e){1024&e[j]||(e[j]|=1024,rp(e,1))}function np(e){1024&e[j]&&(e[j]&=-1025,rp(e,-1))}function rp(e,t){let n=e[ae];if(null===n)return;n[Mi]+=t;let r=n;for(n=n[ae];null!==n&&(1===t&&1===r[Mi]||-1===t&&0===r[Mi]);)n[Mi]+=t,r=n,n=n[ae]}const P={lFrame:pp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function op(){return P.bindingsEnabled}function D(){return P.lFrame.lView}function U(){return P.lFrame.tView}function Fi(e){return P.lFrame.contextLView=e,e[pe]}function Li(e){return P.lFrame.contextLView=null,e}function Me(){let e=ap();for(;null!==e&&64===e.type;)e=e.parent;return e}function ap(){return P.lFrame.currentTNode}function jt(e,t){const n=P.lFrame;n.currentTNode=e,n.isParent=t}function Vl(){return P.lFrame.isParent}function br(){return P.lFrame.bindingIndex++}function l0(e,t){const n=P.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ul(t)}function Ul(e){P.lFrame.currentDirectiveIndex=e}function ql(e){P.lFrame.currentQueryIndex=e}function c0(e){const t=e[C];return 2===t.type?t.declTNode:1===t.type?e[Ae]:null}function fp(e,t,n){if(n&V.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&V.Host||(i=c0(s),null===i||(s=s[mr],10&i.type))););if(null===i)return!1;t=i,e=s}const r=P.lFrame=hp();return r.currentTNode=t,r.lView=e,!0}function Gl(e){const t=hp(),n=e[C];P.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function hp(){const e=P.lFrame,t=null===e?null:e.child;return null===t?pp(e):t}function pp(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function gp(){const e=P.lFrame;return P.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const mp=gp;function Wl(){const e=gp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Be(){return P.lFrame.selectedIndex}function Un(e){P.lFrame.selectedIndex=e}let vp=!0;function uo(){return vp}function In(e){vp=e}function co(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),null!=c&&(e.destroyHooks??=[]).push(n,c)}}function fo(e,t,n){_p(e,t,3,n)}function ho(e,t,n,r){(3&e[j])===n&&_p(e,t,n,r)}function Kl(e,t){let n=e[j];(3&n)===t&&(n&=8191,n+=1,e[j]=n)}function _p(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&e[yr]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[yr]+=65536),(a<s||-1==s)&&(v0(e,n,t,l),e[yr]=(4294901760&e[yr])+l+2),l++}function Dp(e,t){Lt(4,e,t);const n=ht(null);try{t.call(e)}finally{ht(n),Lt(5,e,t)}}function v0(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];i?e[j]>>13<e[yr]>>16&&(3&e[j])===t&&(e[j]+=8192,Dp(a,s)):Dp(a,s)}const Er=-1;class $i{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Zl(e){return e!==Er}function Bi(e){return 32767&e}function Vi(e,t){let n=function b0(e){return e>>16}(e),r=t;for(;n>0;)r=r[mr],n--;return r}let Yl=!0;function po(e){const t=Yl;return Yl=e,t}const wp=255,bp=5;let E0=0;const $t={};function go(e,t){const n=Ep(e,t);if(-1!==n)return n;const r=t[C];r.firstCreatePass&&(e.injectorIndex=t.length,Jl(r.data,e),Jl(t,null),Jl(r.blueprint,null));const i=mo(e,t),s=e.injectorIndex;if(Zl(i)){const o=Bi(i),a=Vi(i,t),l=a[C].data;for(let u=0;u<8;u++)t[s+u]=a[o+u]|l[o+u]}return t[s+8]=i,s}function Jl(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ep(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function mo(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Np(i),null===r)return Er;if(n++,i=i[mr],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Er}function Xl(e,t,n){!function C0(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Si)&&(r=n[Si]),null==r&&(r=n[Si]=E0++);const i=r&wp;t.data[e+(i>>bp)]|=1<<i}(e,t,n)}function Cp(e,t,n){if(n&V.Optional||void 0!==e)return e;_l()}function Sp(e,t,n,r){if(n&V.Optional&&void 0===r&&(r=null),!(n&(V.Self|V.Host))){const i=e[bn],s=qe(void 0);try{return i?i.get(t,r,n&V.Optional):fh(t,r,n&V.Optional)}finally{qe(s)}}return Cp(r,0,n)}function Ip(e,t,n,r=V.Default,i){if(null!==e){if(2048&t[j]&&!(r&V.Self)){const o=function P0(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&2048&o[j]&&!(512&o[j]);){const a=Tp(s,o,n,r|V.Self,$t);if(a!==$t)return a;let l=s.parent;if(!l){const u=o[Ph];if(u){const c=u.get(n,$t,r);if(c!==$t)return c}l=Np(o),o=o[mr]}s=l}return i}(e,t,n,r,$t);if(o!==$t)return o}const s=Tp(e,t,n,r,$t);if(s!==$t)return s}return Sp(t,n,r,i)}function Tp(e,t,n,r,i){const s=function T0(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Si)?e[Si]:void 0;return"number"==typeof t?t>=0?t&wp:A0:t}(n);if("function"==typeof s){if(!fp(t,e,r))return r&V.Host?Cp(i,0,r):Sp(t,n,r,i);try{let o;if(o=s(r),null!=o||r&V.Optional)return o;_l()}finally{mp()}}else if("number"==typeof s){let o=null,a=Ep(e,t),l=Er,u=r&V.Host?t[ge][Ae]:null;for((-1===a||r&V.SkipSelf)&&(l=-1===a?mo(e,t):t[a+8],l!==Er&&Ap(r,!1)?(o=t[C],a=Bi(l),t=Vi(l,t)):a=-1);-1!==a;){const c=t[C];if(Mp(s,a,c.data)){const d=I0(a,t,n,o,r,u);if(d!==$t)return d}l=t[a+8],l!==Er&&Ap(r,t[C].data[a+8]===u)&&Mp(s,a,t)?(o=c,a=Bi(l),t=Vi(l,t)):a=-1}}return i}function I0(e,t,n,r,i,s){const o=t[C],a=o.data[e+8],c=function yo(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,f=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&Ct(h)&&h.type===n)return l}return null}(a,o,n,null==r?Vn(a)&&Yl:r!=o&&0!=(3&a.type),i&V.Host&&s===a);return null!==c?zn(t,o,c,a):$t}function zn(e,t,n,r){let i=e[n];const s=t.data;if(function _0(e){return e instanceof $i}(i)){const o=i;o.resolving&&function Qb(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new w(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Z(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():x(e)}(s[n]));const a=po(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?qe(o.injectImpl):null;fp(e,r,V.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function y0(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=Qh(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}(n,s[n],t)}finally{null!==u&&qe(u),po(a),o.resolving=!1,mp()}}return i}function Mp(e,t,n){return!!(n[t+(e>>bp)]&1<<e)}function Ap(e,t){return!(e&V.Self||e&V.Host&&t)}class Ve{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ip(this._tNode,this._lView,t,Xs(r),n)}}function A0(){return new Ve(Me(),D())}function Np(e){const t=e[C],n=t.type;return 2===n?t.declTNode:1===n?e[Ae]:null}const Sr="__parameters__";function Tr(e,t,n){return Jt(()=>{const r=function nu(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(Sr)?l[Sr]:Object.defineProperty(l,Sr,{value:[]})[Sr];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Ar(e,t){e.forEach(n=>Array.isArray(n)?Ar(n,t):t(n))}function kp(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function vo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function nt(e,t,n){let r=Nr(e,t);return r>=0?e[1|r]=n:(r=~r,function j0(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function ru(e,t){const n=Nr(e,t);if(n>=0)return e[1|n]}function Nr(e,t){return function Op(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const su=Ci(Tr("Optional"),8),ou=Ci(Tr("SkipSelf"),4);function Co(e){return 128==(128&e.flags)}var Tn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Tn||{});const cu=new Map;let lC=0;const fu="__ngContext__";function Ne(e,t){We(t)?(e[fu]=t[Pi],function cC(e){cu.set(e[Pi],e)}(t)):e[fu]=t}let hu;function pu(e,t){return hu(e,t)}function Wi(e){const t=e[ae];return je(t)?t[ae]:t}function Xp(e){return tg(e[Ai])}function eg(e){return tg(e[Et])}function tg(e){for(;null!==e&&!je(e);)e=e[Et];return e}function Or(e,t,n,r,i){if(null!=r){let s,o=!1;je(r)?s=r:We(r)&&(o=!0,r=r[fe]);const a=ne(r);0===e&&null!==n?null==i?sg(t,n,a):qn(t,n,a,i||null,!0):1===e&&null!==n?qn(t,n,a,i||null,!0):2===e?function Po(e,t,n){const r=Ao(e,t);r&&function AC(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function kC(e,t,n,r,i){const s=n[Ft];s!==ne(n)&&Or(t,e,r,s,i);for(let a=Ie;a<n.length;a++){const l=n[a];Qi(l[C],l,e,t,r,s)}}(t,e,s,n,i)}}function To(e,t,n){return e.createElement(t,n)}function rg(e,t){const n=e[vr],r=n.indexOf(t);np(t),n.splice(r,1)}function Mo(e,t){if(e.length<=Ie)return;const n=Ie+t,r=e[n];if(r){const i=r[Ni];null!==i&&i!==e&&rg(i,r),t>0&&(e[n-1][Et]=r[Et]);const s=vo(e,Ie+t);!function wC(e,t){Qi(e,t,t[R],2,null,null),t[fe]=null,t[Ae]=null}(r[C],r);const o=s[Rt];null!==o&&o.detachView(s[C]),r[ae]=null,r[Et]=null,r[j]&=-129}return r}function mu(e,t){if(!(256&t[j])){const n=t[R];t[ki]&&Vh(t[ki]),t[Oi]&&Vh(t[Oi]),n.destroyNode&&Qi(e,t,n,3,null,null),function CC(e){let t=e[Ai];if(!t)return yu(e[C],e);for(;t;){let n=null;if(We(t))n=t[Ai];else{const r=t[Ie];r&&(n=r)}if(!n){for(;t&&!t[Et]&&t!==e;)We(t)&&yu(t[C],t),t=t[ae];null===t&&(t=e),We(t)&&yu(t[C],t),n=t&&t[Et]}t=n}}(t)}}function yu(e,t){if(!(256&t[j])){t[j]&=-129,t[j]|=256,function MC(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof $i)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Lt(4,a,l);try{l.call(a)}finally{Lt(5,a,l)}}else{Lt(4,i,s);try{s.call(i)}finally{Lt(5,i,s)}}}}}(e,t),function TC(e,t){const n=e.cleanup,r=t[pr];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(t[pr]=null);const i=t[En];if(null!==i){t[En]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(e,t),1===t[C].type&&t[R].destroy();const n=t[Ni];if(null!==n&&je(t[ae])){n!==t[ae]&&rg(n,t);const r=t[Rt];null!==r&&r.detachView(e)}!function dC(e){cu.delete(e[Pi])}(t)}}function vu(e,t,n){return function ig(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[fe];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===dt.None||s===dt.Emulated)return null}return Ke(r,n)}}(e,t.parent,n)}function qn(e,t,n,r,i){e.insertBefore(t,n,r,i)}function sg(e,t,n){e.appendChild(t,n)}function og(e,t,n,r,i){null!==r?qn(e,t,n,r,i):sg(e,t,n)}function Ao(e,t){return e.parentNode(t)}let _u,Eu,ug=function lg(e,t,n){return 40&e.type?Ke(e,n):null};function No(e,t,n,r){const i=vu(e,r,t),s=t[R],a=function ag(e,t,n){return ug(e,t,n)}(r.parent||t[Ae],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)og(s,i,n[l],a,!1);else og(s,i,n,a,!1);void 0!==_u&&_u(s,r,t,n,i)}function Ki(e,t){if(null!==t){const n=t.type;if(3&n)return Ke(t,e);if(4&n)return Du(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ki(e,r);{const i=e[t.index];return je(i)?Du(-1,i):ne(i)}}if(32&n)return pu(t,e)()||ne(e[t.index]);{const r=dg(e,t);return null!==r?Array.isArray(r)?r[0]:Ki(Wi(e[ge]),r):Ki(e,t.next)}}return null}function dg(e,t){return null!==t?e[ge][Ae].projection[t.projection]:null}function Du(e,t){const n=Ie+e+1;if(n<t.length){const r=t[n],i=r[C].firstChild;if(null!==i)return Ki(r,i)}return t[Ft]}function wu(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Ne(ne(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)wu(e,t,n.child,r,i,s,!1),Or(t,e,i,a,s);else if(32&l){const u=pu(n,r);let c;for(;c=u();)Or(t,e,i,c,s);Or(t,e,i,a,s)}else 16&l?hg(e,t,r,n,i,s):Or(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Qi(e,t,n,r,i,s){wu(n,r,e.firstChild,t,i,s,!1)}function hg(e,t,n,r,i,s){const o=n[ge],l=o[Ae].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Or(t,e,i,l[u],s);else{let u=l;const c=o[ae];Co(r)&&(u.flags|=128),wu(e,t,u,c,i,s,!0)}}function pg(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function gg(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Nl(e,t,r),null!==i&&pg(e,t,i),null!==s&&function xC(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class _g{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Ro=new O("ENVIRONMENT_INITIALIZER"),Mg=new O("INJECTOR",-1),Ag=new O("INJECTOR_DEF_TYPES");class Au{get(t,n=Ei){if(n===Ei){const r=new Error(`NullInjectorError: No provider for ${De(t)}!`);throw r.name="NullInjectorError",r}return n}}function lS(...e){return{\u0275providers:Pg(0,e),\u0275fromNgModule:!0}}function Pg(e,...t){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Ar(t,o=>{const a=o;Fo(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&kg(i,s),n}function kg(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];Nu(i,s=>{t(s,r)})}}function Fo(e,t,n,r){if(!(e=k(e)))return!1;let i=null,s=Zs(e);const o=!s&&H(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const l=e.ngModule;if(s=Zs(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)Fo(u,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Ar(s.imports,c=>{Fo(c,t,n,r)&&(u||=[],u.push(c))})}finally{}void 0!==u&&kg(u,t)}if(!a){const u=Hn(i)||(()=>new i);t({provide:i,useFactory:u,deps:W},i),t({provide:Ag,useValue:i,multi:!0},i),t({provide:Ro,useValue:()=>F(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const u=e;Nu(l,c=>{t(c,u)})}}}return i!==e&&void 0!==e.providers}function Nu(e,t){for(let n of e)vl(n)&&(n=n.\u0275providers),Array.isArray(n)?Nu(n,t):t(n)}const uS=Y({provide:String,useValue:Y});function Pu(e){return null!==e&&"object"==typeof e&&uS in e}function Gn(e){return"function"==typeof e}const ku=new O("Set Injector scope."),Lo={},dS={};let Ou;function jo(){return void 0===Ou&&(Ou=new Au),Ou}class sn{}class Lr extends sn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ru(t,o=>this.processProvider(o)),this.records.set(Mg,jr(void 0,this)),i.has("environment")&&this.records.set(sn,jr(void 0,this));const s=this.records.get(ku);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ag.multi,W,V.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=wn(this),r=qe(void 0);try{return t()}finally{wn(n),qe(r)}}get(t,n=Ei,r=V.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(yh))return t[yh](this);r=Xs(r);const s=wn(this),o=qe(void 0);try{if(!(r&V.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function mS(e){return"function"==typeof e||"object"==typeof e&&e instanceof O}(t)&&Qs(t);l=u&&this.injectableDefInScope(u)?jr(xu(t),Lo):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&V.Self?jo():this.parent).get(t,n=r&V.Optional&&n===Ei?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Js]=a[Js]||[]).unshift(De(t)),s)throw a;return function uE(e,t,n,r){const i=e[Js];throw t[ph]&&i.unshift(t[ph]),e.message=function cE(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=De(t);if(Array.isArray(t))i=t.map(De).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):De(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(iE,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Js]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{qe(o),wn(s)}}resolveInjectorInitializers(){const t=wn(this),n=qe(void 0);try{const i=this.get(Ro.multi,W,V.Self);for(const s of i)s()}finally{wn(t),qe(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(De(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(t){let n=Gn(t=k(t))?t:k(t&&t.provide);const r=function hS(e){return Pu(e)?jr(void 0,e.useValue):jr(function Rg(e,t,n){let r;if(Gn(e)){const i=k(e);return Hn(i)||xu(i)}if(Pu(e))r=()=>k(e.useValue);else if(function xg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Tl(e.deps||[]));else if(function Og(e){return!(!e||!e.useExisting)}(e))r=()=>F(k(e.useExisting));else{const i=k(e&&(e.useClass||e.provide));if(!function pS(e){return!!e.deps}(e))return Hn(i)||xu(i);r=()=>new i(...Tl(e.deps))}return r}(e),Lo)}(t);if(Gn(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=jr(void 0,Lo,!0),i.factory=()=>Tl(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Lo&&(n.value=dS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function gS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=k(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function xu(e){const t=Qs(e),n=null!==t?t.factory:Hn(e);if(null!==n)return n;if(e instanceof O)throw new w(204,!1);if(e instanceof Function)return function fS(e){const t=e.length;if(t>0)throw function zi(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new w(204,!1);const n=function eE(e){return e&&(e[Ys]||e[ch])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new w(204,!1)}function jr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ru(e,t){for(const n of e)Array.isArray(n)?Ru(n,t):n&&vl(n)?Ru(n.\u0275providers,t):t(n)}const $o=new O("AppId",{providedIn:"root",factory:()=>yS}),yS="ng",Fg=new O("Platform Initializer"),$r=new O("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lg=new O("AnimationModuleType"),jg=new O("CSP nonce",{providedIn:"root",factory:()=>function Rr(){if(void 0!==Eu)return Eu;if(typeof document<"u")return document;throw new w(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let $g=(e,t,n)=>null;function Uu(e,t,n=!1){return $g(e,t,n)}class TS{}class Hg{}class AS{resolveComponentFactory(t){throw function MS(e){const t=Error(`No component factory found for ${De(e)}.`);return t.ngComponent=e,t}(t)}}let qo=(()=>{class e{static#e=this.NULL=new AS}return e})();function NS(){return Hr(Me(),D())}function Hr(e,t){return new Ur(Ke(e,t))}let Ur=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=NS}return e})();class ts{}let OS=(()=>{class e{static#e=this.\u0275prov=q({token:e,providedIn:"root",factory:()=>null})}return e})();class Gu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const xS=new Gu("16.2.12"),Wu={};function Kg(e,t=null,n=null,r){const i=Qg(e,t,n,r);return i.resolveInjectorInitializers(),i}function Qg(e,t=null,n=null,r,i=new Set){const s=[n||W,lS(e)];return r=r||("object"==typeof e?void 0:De(e)),new Lr(s,t||jo(),r||null,i)}let Bt=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Ei;static#t=this.NULL=new Au;static create(n,r){if(Array.isArray(n))return Kg({name:""},r,n,"");{const i=n.name??"";return Kg({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=q({token:e,providedIn:"any",factory:()=>F(Mg)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function Qu(e){return e.ngOriginalError}class on{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Qu(t);for(;n&&Qu(n);)n=Qu(n);return n||null}}function Yu(e){return t=>{setTimeout(e,void 0,t)}}const an=class VS extends Gs{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Yu(s),i&&(i=Yu(i)),o&&(o=Yu(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof Je&&t.add(a),a}};function Yg(...e){}class le{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new an(!1),this.onMicrotaskEmpty=new an(!1),this.onStable=new an(!1),this.onError=new an(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function HS(){const e="function"==typeof ee.requestAnimationFrame;let t=ee[e?"requestAnimationFrame":"setTimeout"],n=ee[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function qS(e){const t=()=>{!function zS(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ee,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Xu(e),e.isCheckStableRunning=!0,Ju(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Xu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function WS(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return Jg(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Xg(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Jg(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Xg(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Xu(e),Ju(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!le.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(le.isInAngularZone())throw new w(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,US,Yg,Yg);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const US={};function Ju(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Xu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Jg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Xg(e){e._nesting--,Ju(e)}class GS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new an,this.onMicrotaskEmpty=new an,this.onStable=new an,this.onError=new an}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const em=new O("",{providedIn:"root",factory:tm});function tm(){const e=te(le);let t=!0;return Ub(new Fe(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Fe(i=>{let s;e.runOutsideAngular(()=>{s=e.onStable.subscribe(()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const o=e.onUnstable.subscribe(()=>{le.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(ah()))}let ec=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e})}return e})();function ns(e){for(;e;){e[j]|=64;const t=Wi(e);if(Ol(e)&&!t)return e;e=t}return null}const om=new O("",{providedIn:"root",factory:()=>!1});let Wo=null;function cm(e,t){return e[t]??hm()}function dm(e,t){const n=hm();n.producerNode?.length&&(e[t]=Wo,n.lView=e,Wo=fm())}const rI={...Rh,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{ns(e.lView)},lView:null};function fm(){return Object.create(rI)}function hm(){return Wo??=fm(),Wo}const L={};function rt(e){pm(U(),D(),Be()+e,!1)}function pm(e,t,n,r){if(!r)if(3==(3&t[j])){const s=e.preOrderCheckHooks;null!==s&&fo(t,s,n)}else{const s=e.preOrderHooks;null!==s&&ho(t,s,0,n)}Un(n)}function M(e,t=V.Default){const n=D();return null===n?F(e,t):Ip(Me(),n,k(e),t)}function Ko(e,t,n,r,i,s,o,a,l,u,c){const d=t.blueprint.slice();return d[fe]=i,d[j]=140|r,(null!==u||e&&2048&e[j])&&(d[j]|=2048),tp(d),d[ae]=d[mr]=e,d[pe]=n,d[gr]=o||e&&e[gr],d[R]=a||e&&e[R],d[bn]=l||e&&e[bn]||null,d[Ae]=s,d[Pi]=function uC(){return lC++}(),d[en]=c,d[Ph]=u,d[ge]=2==t.type?e[ge]:d,d}function Gr(e,t,n,r,i){let s=e.data[t];if(null===s)s=function tc(e,t,n,r,i){const s=ap(),o=Vl(),l=e.data[t]=function fI(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,a=0;return function wr(){return null!==P.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,t,n,r,i),function a0(){return P.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ji(){const e=P.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return jt(s,!0),s}function rs(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function gm(e,t,n,r,i){const s=cm(t,ki),o=Be(),a=2&r;try{Un(-1),a&&t.length>$&&pm(e,t,$,!1),Lt(a?2:0,i);const u=a?s:null,c=Rl(u);try{null!==u&&(u.dirty=!1),n(r,i)}finally{Fl(u,c)}}finally{a&&null===t[ki]&&dm(t,ki),Un(o),Lt(a?3:1,i)}}function nc(e,t,n){if(kl(t)){const r=ht(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ht(r)}}}function rc(e,t,n){op()&&(function _I(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;Vn(n)&&function II(e,t,n){const r=Ke(t,e),i=mm(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Qo(e,Ko(e,i,null,o,r,t,null,e[gr].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||go(n,t),Ne(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const l=e.data[a],u=zn(t,e,a,n);Ne(u,t),null!==o&&TI(0,a-i,u,l,0,o),Ct(l)&&(tt(n.index,t)[pe]=zn(t,e,a,n))}}(e,t,n,Ke(n,t)),64==(64&n.flags)&&wm(e,t,n))}function ic(e,t,n=Ke){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function mm(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=sc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function sc(e,t,n,r,i,s,o,a,l,u,c){const d=$+r,f=d+i,h=function oI(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:L);return n}(d,f),p="function"==typeof u?u():u;return h[C]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}let ym=e=>null;function vm(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?_m(n,t,i,s):r.hasOwnProperty(i)&&_m(n,t,r[i],s)}return n}function _m(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function oc(e,t,n,r){if(op()){const i=null===r?null:{"":-1},s=function wI(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Ch(t,o.selectors,!1))if(r||(r=[]),Ct(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),ac(e,t,a.length)}else r.unshift(o),ac(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Dm(e,t,n,o,i,a),i&&function bI(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new w(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=Ii(n.mergedAttrs,n.attrs)}function Dm(e,t,n,r,i,s){for(let u=0;u<r.length;u++)Xl(go(n,t),e,r[u].type);!function CI(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=rs(e,t,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];n.mergedAttrs=Ii(n.mergedAttrs,c.hostAttrs),SI(e,n,t,l,c),EI(l,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function hI(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let l=null,u=null;for(let c=t.directiveStart;c<i;c++){const d=s[c],f=n?n.get(d):null,p=f?f.outputs:null;l=vm(d.inputs,c,l,f?f.inputs:null),u=vm(d.outputs,c,u,p);const g=null===l||null===o||Eh(t)?null:MI(l,c,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}(e,n,s)}function wm(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function u0(){return P.lFrame.currentDirectiveIndex}();try{Un(s);for(let a=r;a<i;a++){const l=e.data[a],u=t[a];Ul(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&DI(l,u)}}finally{Un(-1),Ul(o)}}function DI(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ac(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function EI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ct(t)&&(n[""]=e)}}function SI(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=Hn(i.type)),o=new $i(s,Ct(i),M);e.blueprint[r]=o,n[r]=o,function yI(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function vI(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,rs(e,n,i.hostVars,L),i)}function TI(e,t,n,r,i,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)bm(r,n,o[a++],o[a++],o[a++])}function bm(e,t,n,r,i){const s=ht(null);try{const o=e.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{ht(s)}}function MI(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Em(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function Cm(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=e.data[s];ql(n[r]),o.contentQueries(2,t[s],s)}}}function Qo(e,t){return e[Ai]?e[Nh][Et]=t:e[Ai]=t,e[Nh]=t,t}function uc(e,t,n){ql(0);const r=ht(null);try{t(e,n)}finally{ht(r)}}function Mm(e,t){const n=e[bn],r=n?n.get(on,null):null;r&&r.handleError(t)}function cc(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];bm(e.data[o],t[o],r,a,i)}}function AI(e,t){const n=tt(t,e),r=n[C];!function NI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[fe];null!==i&&null===n[en]&&(n[en]=Uu(i,n[bn])),dc(r,n,n[pe])}function dc(e,t,n){Gl(t);try{const r=e.viewQuery;null!==r&&uc(1,r,n);const i=e.template;null!==i&&gm(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Cm(e,t),e.staticViewQueries&&uc(2,e.viewQuery,n);const s=e.components;null!==s&&function PI(e,t){for(let n=0;n<t.length;n++)AI(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[j]&=-5,Wl()}}let Am=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function jE(e,t,n){const r=Object.create($E);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>$h(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Bh(r))return;r.hasRun=!0;const o=Rl(r);try{r.cleanupFn(),r.cleanupFn=Kh,r.fn(i)}finally{Fl(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(n,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e})}return e})();function Zo(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=gl(i,a):2==s&&(r=gl(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function is(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];null!==s&&r.push(ne(s)),je(s)&&Nm(s,r);const o=n.type;if(8&o)is(e,t,n.child,r);else if(32&o){const a=pu(n,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=dg(t,n);if(Array.isArray(a))r.push(...a);else{const l=Wi(t[ge]);is(l[C],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Nm(e,t){for(let n=Ie;n<e.length;n++){const r=e[n],i=r[C].firstChild;null!==i&&is(r[C],r,i,t)}e[Ft]!==e[fe]&&t.push(e[Ft])}function Yo(e,t,n,r=!0){const i=t[gr],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{Pm(e,t,e.template,n)}catch(l){throw r&&Mm(t,l),l}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function Pm(e,t,n,r){const i=t[j];if(256!=(256&i)){t[gr].effectManager?.flush(),Gl(t);try{tp(t),function up(e){return P.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&gm(e,t,n,2,r);const o=3==(3&i);if(o){const u=e.preOrderCheckHooks;null!==u&&fo(t,u,null)}else{const u=e.preOrderHooks;null!==u&&ho(t,u,0,null),Kl(t,0)}if(function xI(e){for(let t=Xp(e);null!==t;t=eg(t)){if(!t[kh])continue;const n=t[vr];for(let r=0;r<n.length;r++){QE(n[r])}}}(t),km(t,2),null!==e.contentQueries&&Cm(e,t),o){const u=e.contentCheckHooks;null!==u&&fo(t,u)}else{const u=e.contentHooks;null!==u&&ho(t,u,1),Kl(t,1)}!function sI(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=cm(t,Oi);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)Un(~s);else{const o=s,a=n[++i],l=n[++i];l0(a,o),r.dirty=!1;const u=Rl(r);try{l(2,t[o])}finally{Fl(r,u)}}}}finally{null===t[Oi]&&dm(t,Oi),Un(-1)}}(e,t);const a=e.components;null!==a&&xm(t,a,0);const l=e.viewQuery;if(null!==l&&uc(2,l,r),o){const u=e.viewCheckHooks;null!==u&&fo(t,u)}else{const u=e.viewHooks;null!==u&&ho(t,u,2),Kl(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[j]&=-73,np(t)}finally{Wl()}}}function km(e,t){for(let n=Xp(e);null!==n;n=eg(n))for(let r=Ie;r<n.length;r++)Om(n[r],t)}function RI(e,t,n){Om(tt(t,e),n)}function Om(e,t){if(!function WE(e){return 128==(128&e[j])}(e))return;const n=e[C],r=e[j];if(80&r&&0===t||1024&r||2===t)Pm(n,e,n.template,e[pe]);else if(e[Mi]>0){km(e,1);const i=n.components;null!==i&&xm(e,i,1)}}function xm(e,t,n){for(let r=0;r<t.length;r++)RI(e,t[r],n)}class ss{get rootNodes(){const t=this._lView,n=t[C];return is(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pe]}set context(t){this._lView[pe]=t}get destroyed(){return 256==(256&this._lView[j])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ae];if(je(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Mo(t,r),vo(n,r))}this._attachedToViewContainer=!1}mu(this._lView[C],this._lView)}onDestroy(t){!function ip(e,t){if(256==(256&e[j]))throw new w(911,!1);null===e[En]&&(e[En]=[]),e[En].push(t)}(this._lView,t)}markForCheck(){ns(this._cdRefInjectingView||this._lView)}detach(){this._lView[j]&=-129}reattach(){this._lView[j]|=128}detectChanges(){Yo(this._lView[C],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function EC(e,t){Qi(e,t,t[R],2,null,null)}(this._lView[C],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=t}}class FI extends ss{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Yo(t[C],t,t[pe],!1)}checkNoChanges(){}get context(){return null}}class Rm extends qo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=H(t);return new os(n,this.ngModule)}}function Fm(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class jI{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Xs(r);const i=this.injector.get(t,Wu,r);return i!==Wu||n===Wu?i:this.parentInjector.get(t,n,r)}}class os extends Hg{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Fm(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Fm(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function DE(e){return e.map(_E).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof sn?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new jI(t,s):t,a=o.get(ts,null);if(null===a)throw new w(407,!1);const d={rendererFactory:a,sanitizer:o.get(OS,null),effectManager:o.get(Am,null),afterRenderEventManager:o.get(ec,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function aI(e,t,n,r){const s=r.get(om,!1)||n===dt.ShadowDom,o=e.selectRootElement(t,s);return function lI(e){ym(e)}(o),o}(f,r,this.componentDef.encapsulation,o):To(f,h,function LI(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let y=null;null!==p&&(y=Uu(p,o,!0));const b=sc(0,null,null,1,0,null,null,null,null,null,null),E=Ko(null,b,null,_,null,null,d,f,o,null,y);let T,J;Gl(E);try{const oe=this.componentDef;let xe,lt=null;oe.findHostDirectiveDefs?(xe=[],lt=new Map,oe.findHostDirectiveDefs(oe,xe,lt),xe.push(oe)):xe=[oe];const kt=function BI(e,t){const n=e[C],r=$;return e[r]=t,Gr(n,r,2,"#host",null)}(E,p),tl=function VI(e,t,n,r,i,s,o){const a=i[C];!function HI(e,t,n,r){for(const i of e)t.mergedAttrs=Ii(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Zo(t,t.mergedAttrs,!0),null!==n&&gg(r,n,t))}(r,e,t,o);let l=null;null!==t&&(l=Uu(t,i[bn]));const u=s.rendererFactory.createRenderer(t,n);let c=16;n.signals?c=4096:n.onPush&&(c=64);const d=Ko(i,mm(n),null,c,i[e.index],e,s,u,null,null,l);return a.firstCreatePass&&ac(a,e,r.length-1),Qo(i,d),i[e.index]=d}(kt,p,oe,xe,E,d,f);J=ep(b,$),p&&function zI(e,t,n,r){if(r)Nl(e,n,["ng-version",xS.full]);else{const{attrs:i,classes:s}=function wE(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!bt(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Nl(e,n,i),s&&s.length>0&&pg(e,n,s.join(" "))}}(f,oe,p,r),void 0!==n&&function qI(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(J,this.ngContentSelectors,n),T=function UI(e,t,n,r,i,s){const o=Me(),a=i[C],l=Ke(o,i);Dm(a,i,o,n,null,r);for(let c=0;c<n.length;c++)Ne(zn(i,a,o.directiveStart+c,o),i);wm(a,i,o),l&&Ne(l,i);const u=zn(i,a,o.directiveStart+o.componentOffset,o);if(e[pe]=i[pe]=u,null!==s)for(const c of s)c(u,t);return nc(a,o,e),u}(tl,oe,xe,lt,E,[GI]),dc(b,E,null)}finally{Wl()}return new $I(this.componentType,T,Hr(J,E),E,J)}}class $I extends TS{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new FI(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const s=this._rootLView;cc(s[C],s,i,t,n),this.previousInputValues.set(t,n),ns(tt(this._tNode.index,s))}}get injector(){return new Ve(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function GI(){const e=Me();co(D()[C],e)}function Xo(e){return!!function fc(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Pe(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Ut(e,t,n,r,i,s,o,a){const l=D(),u=U(),c=e+$,d=u.firstCreatePass?function bT(e,t,n,r,i,s,o,a,l){const u=t.consts,c=Gr(t,e,4,o||null,Sn(u,a));oc(t,n,c,Sn(u,l)),co(t,c);const d=c.tView=sc(2,c,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,r,i,s,o):u.data[c];jt(d,!1);const f=ty(u,l,d,e);uo()&&No(u,l,f,d),Ne(f,l),Qo(l,l[c]=Em(f,l,f,d)),io(d)&&rc(u,l,d),null!=o&&ic(l,d,a)}let ty=function ny(e,t,n,r){return In(!0),t[R].createComment("")};function St(e,t,n){const r=D();return Pe(r,br(),t)&&function it(e,t,n,r,i,s,o,a){const l=Ke(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[r])?(cc(e,n,c,r,i),Vn(t)&&function gI(e,t){const n=tt(t,e);16&n[j]||(n[j]|=64)}(n,t.index)):3&t.type&&(r=function pI(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(l,r,i))}(U(),function ce(){const e=P.lFrame;return ep(e.tView,e.selectedIndex)}(),r,e,t,r[R],n,!1),St}function vc(e,t,n,r,i){const o=i?"class":"style";cc(e,n,t.inputs[o],o,r)}function ye(e,t,n,r){const i=D(),s=U(),o=$+e,a=i[R],l=s.firstCreatePass?function TT(e,t,n,r,i,s){const o=t.consts,l=Gr(t,e,2,r,Sn(o,i));return oc(t,n,l,Sn(o,s)),null!==l.attrs&&Zo(l,l.attrs,!1),null!==l.mergedAttrs&&Zo(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,t,n,r):s.data[o],u=ry(s,i,l,a,t,e);i[o]=u;const c=io(l);return jt(l,!0),gg(a,u,l),32!=(32&l.flags)&&uo()&&No(s,i,u,l),0===function YE(){return P.lFrame.elementDepthCount}()&&Ne(u,i),function JE(){P.lFrame.elementDepthCount++}(),c&&(rc(s,i,l),nc(s,l,i)),null!==r&&ic(i,l),ye}function ve(){let e=Me();Vl()?function Hl(){P.lFrame.isParent=!1}():(e=e.parent,jt(e,!1));const t=e;(function e0(e){return P.skipHydrationRootTNode===e})(t)&&function s0(){P.skipHydrationRootTNode=null}(),function XE(){P.lFrame.elementDepthCount--}();const n=U();return n.firstCreatePass&&(co(n,e),kl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function D0(e){return 0!=(8&e.flags)}(t)&&vc(n,t,D(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function w0(e){return 0!=(16&e.flags)}(t)&&vc(n,t,D(),t.stylesWithoutHost,!1),ve}function Kn(e,t,n,r){return ye(e,t,n,r),ve(),Kn}let ry=(e,t,n,r,i,s)=>(In(!0),To(r,i,function yp(){return P.lFrame.currentNamespace}()));function wc(){return D()}function bc(e){return!!e&&"function"==typeof e.then}function oy(e){return!!e&&"function"==typeof e.subscribe}function Qn(e,t,n,r){const i=D(),s=U(),o=Me();return function ly(e,t,n,r,i,s,o){const a=io(r),u=e.firstCreatePass&&function Im(e){return e.cleanup||(e.cleanup=[])}(e),c=t[pe],d=function Sm(e){return e[pr]||(e[pr]=[])}(t);let f=!0;if(3&r.type||o){const g=Ke(r,t),m=o?o(g):g,_=d.length,y=o?E=>o(ne(E[r.index])):r.index;let b=null;if(!o&&a&&(b=function OT(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[pr],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=cy(r,t,c,s,!1);const E=n.listen(m,i,s);d.push(s,E),u&&u.push(i,y,_,_+1)}}else s=cy(r,t,c,s,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const T=t[p[m]][p[m+1]].subscribe(s),J=d.length;d.push(s,T),u&&u.push(i,r.index,J,-(J+1))}}}(s,i,i[R],o,e,t,r),Qn}function uy(e,t,n,r){try{return Lt(6,t,n),!1!==n(r)}catch(i){return Mm(e,i),!1}finally{Lt(7,t,n)}}function cy(e,t,n,r,i){return function s(o){if(o===Function)return r;ns(e.componentOffset>-1?tt(e.index,t):t);let l=uy(t,n,r,o),u=s.__ngNextListenerFn__;for(;u;)l=uy(t,n,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function ke(e=1){return function d0(e){return(P.lFrame.contextLView=function f0(e,t){for(;e>0;)t=t[mr],e--;return t}(e,P.lFrame.contextLView))[pe]}(e)}function ia(e,t){return e<<17|t<<2}function An(e){return e>>17&32767}function Cc(e){return 2|e}function Zn(e){return(131068&e)>>2}function Sc(e,t){return-131069&e|t<<2}function Ic(e){return 1|e}function Dy(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?An(s):Zn(s),l=!1;for(;0!==a&&(!1===l||o);){const c=e[a+1];HT(e[a],t)&&(l=!0,e[a+1]=r?Ic(c):Cc(c)),a=r?An(c):Zn(c)}l&&(e[n+1]=r?Cc(s):Ic(s))}function HT(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Nr(e,t)>=0}function ds(e,t,n){return It(e,t,n,!1),ds}function Tc(e,t){return It(e,t,null,!0),Tc}function It(e,t,n,r){const i=D(),s=U(),o=function nn(e){const t=P.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2);s.firstUpdatePass&&function My(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[Be()],o=function Ty(e,t){return t>=e.expandoStartIndex}(e,n);(function ky(e,t){return 0!=(e.flags&(t?8:16))})(s,r)&&null===t&&!o&&(t=!1),t=function YT(e,t,n,r){const i=function zl(e){const t=P.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=fs(n=Mc(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Mc(i,e,t,n,r),null===s){let l=function JT(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Zn(r))return e[An(r)]}(e,t,r);void 0!==l&&Array.isArray(l)&&(l=Mc(null,e,t,l[1],r),l=fs(l,t.attrs,r),function XT(e,t,n,r){e[An(n?t.classBindings:t.styleBindings)]=r}(e,t,r,l))}else s=function eM(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=fs(r,e[s].hostAttrs,n);return fs(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function BT(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=An(o),l=Zn(o);e[r]=n;let c,u=!1;if(Array.isArray(n)?(c=n[1],(null===c||Nr(n,c)>0)&&(u=!0)):c=n,i)if(0!==l){const f=An(e[a+1]);e[r+1]=ia(f,a),0!==f&&(e[f+1]=Sc(e[f+1],r)),e[a+1]=function jT(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=ia(a,0),0!==a&&(e[a+1]=Sc(e[a+1],r)),a=r;else e[r+1]=ia(l,0),0===a?a=r:e[l+1]=Sc(e[l+1],r),l=r;u&&(e[r+1]=Cc(e[r+1])),Dy(e,c,r,!0),Dy(e,c,r,!1),function VT(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&Nr(s,t)>=0&&(n[r+1]=Ic(n[r+1]))}(t,c,e,r,s),o=ia(a,l),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}(s,e,o,r),t!==L&&Pe(i,o,t)&&function Ny(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const l=e.data,u=l[a+1],c=function $T(e){return 1==(1&e)}(u)?Py(l,t,n,i,Zn(u),o):void 0;sa(c)||(sa(s)||function LT(e){return 2==(2&e)}(u)&&(s=Py(l,null,n,i,a,o)),function OC(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Tn.DashCase;null==i?e.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Tn.Important),e.setStyle(n,r,i,s))}}(r,o,lo(Be(),n),i,s))}(s,s.data[Be()],i,i[R],e,i[o+1]=function iM(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=De(function Mn(e){return e instanceof _g?e.changingThisBreaksApplicationSecurity:e}(e)))),e}(t,n),r,o)}function Mc(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=fs(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function fs(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),nt(e,o,!!n||t[++s]))}return void 0===e?null:e}function Py(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const l=e[i],u=Array.isArray(l),c=u?l[1]:l,d=null===c;let f=n[i+1];f===L&&(f=d?W:void 0);let h=d?ru(f,r):c===r?f:void 0;if(u&&!sa(h)&&(h=ru(l,r)),sa(h)&&(a=h,o))return a;const p=e[i+1];i=o?An(p):Zn(p)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=ru(l,r))}return a}function sa(e){return void 0!==e}function Yn(e,t=""){const n=D(),r=U(),i=e+$,s=r.firstCreatePass?Gr(r,i,1,t,null):r.data[i],o=Oy(r,n,s,t,e);n[i]=o,uo()&&No(r,n,o,s),jt(s,!1)}let Oy=(e,t,n,r,i)=>(In(!0),function Io(e,t){return e.createText(t)}(t[R],r));function oa(e){return aa("",e,""),oa}function aa(e,t,n){const r=D(),i=function Kr(e,t,n,r){return Pe(e,br(),n)?t+x(n)+r:L}(r,e,t,n);return i!==L&&function un(e,t,n){const r=lo(t,e);!function ng(e,t,n){e.setValue(t,n)}(e[R],r,n)}(r,Be(),i),aa}const ii="en-US";let tv=ii;class Xn{}class TA{}class Rc extends Xn{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rm(this);const i=function et(e,t){const n=e[mh]||null;if(!n&&!0===t)throw new Error(`Type ${De(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function ln(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=Qg(t,n,[{provide:Xn,useValue:this},{provide:qo,useValue:this.componentFactoryResolver},...r],De(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Fc extends TA{constructor(t){super(),this.moduleType=t}create(t){return new Rc(this.moduleType,t,[])}}function oN(e,t,n,r=!0){const i=t[C];if(function SC(e,t,n,r){const i=Ie+r,s=n.length;r>0&&(n[i-1][Et]=t),r<s-Ie?(t[Et]=n[i],kp(n,Ie+r,t)):(n.push(t),t[Et]=null),t[ae]=n;const o=t[Ni];null!==o&&n!==o&&function IC(e,t){const n=e[vr];t[ge]!==t[ae][ae][ge]&&(e[kh]=!0),null===n?e[vr]=[t]:n.push(t)}(o,t);const a=t[Rt];null!==a&&a.insertView(e),t[j]|=128}(i,t,e,n),r){const s=Du(n,e),o=t[R],a=Ao(o,e[Ft]);null!==a&&function bC(e,t,n,r,i,s){r[fe]=i,r[Ae]=t,Qi(e,r,n,1,i,s)}(i,e[Ae],o,t,a,s)}}Symbol;let cn=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=uN}return e})();const aN=cn,lN=class extends aN{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function sN(e,t,n,r){const i=t.tView,a=Ko(e,i,n,4096&e[j]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[Ni]=e[t.index];const u=e[Rt];return null!==u&&(a[Rt]=u.createEmbeddedView(i)),dc(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new ss(i)}};function uN(){return function fa(e,t){return 4&e.type?new lN(t,e,Hr(e,t)):null}(Me(),D())}let Gt=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=gN}return e})();function gN(){return function qv(e,t){let n;const r=t[e.index];return je(r)?n=r:(n=Em(r,t,null,e),t[e.index]=n,Qo(t,n)),Gv(n,t,e,r),new Uv(n,e,t)}(Me(),D())}const mN=Gt,Uv=class extends mN{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Hr(this._hostTNode,this._hostLView)}get injector(){return new Ve(this._hostTNode,this._hostLView)}get parentInjector(){const t=mo(this._hostTNode,this._hostLView);if(Zl(t)){const n=Vi(t,this._hostLView),r=Bi(t);return new Ve(n[C].data[r+8],n)}return new Ve(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=zv(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Ie}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,s){const o=t&&!function Ui(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=o?t:new os(H(t)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const m=(o?u:this.parentInjector).get(sn,null);m&&(s=m)}H(l.componentType??{});const h=l.create(u,i,null,s);return this.insertImpl(h.hostView,a,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function KE(e){return je(e[ae])}(i)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const u=i[ae],c=new Uv(u,u[Ae],u[ae]);c.detach(c.indexOf(t))}}const o=this._adjustIndex(n),a=this._lContainer;return oN(a,i,o,!r),t.attachToViewContainerRef(),kp($c(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=zv(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Mo(this._lContainer,n);r&&(vo($c(this._lContainer),n),mu(r[C],r))}detach(t){const n=this._adjustIndex(t,-1),r=Mo(this._lContainer,n);return r&&null!=vo($c(this._lContainer),n)?new ss(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function zv(e){return e[8]}function $c(e){return e[8]||(e[8]=[])}let Gv=function Wv(e,t,n,r){if(e[Ft])return;let i;i=8&n.type?ne(r):function yN(e,t){const n=e[R],r=n.createComment(""),i=Ke(t,e);return qn(n,Ao(n,i),r,function NC(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Ft]=i};const YN=new O("Application Initializer");let Qc=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=te(YN,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(bc(s))n.push(s);else if(oy(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const dn=new O("LocaleId",{providedIn:"root",factory:()=>te(dn,V.Optional|V.SkipSelf)||function XN(){return typeof $localize<"u"&&$localize.locale||ii}()});let nP=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ot(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const __=new O(""),ma=new O("");let ed,Jc=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ed||(function SP(e){ed=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(F(le),F(Xc),F(ma))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),Xc=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ed?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),Nn=null;const D_=new O("AllowMultipleToken"),td=new O("PlatformDestroyListeners"),w_=new O("appBootstrapListener");function C_(e,t,n=[]){const r=`Platform: ${t}`,i=new O(r);return(s=[])=>{let o=nd();if(!o||o.injector.get(D_,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function MP(e){if(Nn&&!Nn.get(D_,!1))throw new w(400,!1);(function b_(){!function OE(e){zh=e}(()=>{throw new w(600,!1)})})(),Nn=e;const t=e.get(I_);(function E_(e){e.get(Fg,null)?.forEach(n=>n())})(e)}(function S_(e=[],t){return Bt.create({name:t,providers:[{provide:ku,useValue:"platform"},{provide:td,useValue:new Set([()=>Nn=null])},...e]})}(a,r))}return function NP(e){const t=nd();if(!t)throw new w(401,!1);return t}()}}function nd(){return Nn?.get(I_)??null}let I_=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function PP(e="zone.js",t){return"noop"===e?new GS:"zone.js"===e?new le(t):e}(r?.ngZone,function T_(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function AA(e,t,n){return new Rc(e,t,n)}(n.moduleType,this.injector,function k_(e){return[{provide:le,useFactory:e},{provide:Ro,multi:!0,useFactory:()=>{const t=te(OP,{optional:!0});return()=>t.initialize()}},{provide:P_,useFactory:kP},{provide:em,useFactory:tm}]}(()=>i)),o=s.injector.get(on,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{ya(this._modules,s),a.unsubscribe()})}),function M_(e,t,n){try{const r=n();return bc(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Qc);return a.runInitializers(),a.donePromise.then(()=>(function nv(e){ct(e,"Expected localeId to be defined"),"string"==typeof e&&(tv=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(dn,ii)||ii),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=A_({},r);return function IP(e,t,n){const r=new Fc(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(ai);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new w(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new w(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(td,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(F(Bt))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function A_(e,t){return Array.isArray(t)?t.reduce(A_,e):{...e,...t}}let ai=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(P_),this.zoneIsStable=te(em),this.componentTypes=[],this.components=[],this.isStable=te(nP).hasPendingTasks.pipe(function qb(e,t){return yn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(vn(r,l=>{i?.unsubscribe();let u=0;const c=s++;Yt(e(l,c)).subscribe(i=vn(r,d=>r.next(t?t(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}(n=>n?function zb(...e){return oh(e,nh(e))}(!1):this.zoneIsStable),function Gb(e,t=ll){return e=e??Wb,yn((n,r)=>{let i,s=!0;n.subscribe(vn(r,o=>{const a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}(),ah()),this._injector=te(sn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Hg;if(!this._injector.get(Qc).done)throw!i&&function Ti(e){const t=H(e)||Se(e)||Le(e);return null!==t&&t.standalone}(n),new w(405,!1);let o;o=i?n:this._injector.get(qo).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function TP(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Xn),u=o.create(Bt.NULL,[],r||o.selector,a),c=u.location.nativeElement,d=u.injector.get(__,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),ya(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new w(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ya(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(w_,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ya(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new w(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ya(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const P_=new O("",{providedIn:"root",factory:()=>te(on).handleError.bind(void 0)});function kP(){const e=te(le),t=te(on);return n=>e.runOutsideAngular(()=>t.handleError(n))}let OP=(()=>{class e{constructor(){this.zone=te(le),this.applicationRef=te(ai)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class F_{constructor(){}supports(t){return Xo(t)}create(t){return new UP(t)}}const HP=(e,t)=>t;class UP{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||HP}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<j_(r,i,s)?n:r,a=j_(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;c<=p&&p<u&&(s[f]=h+1)}s[o.previousIndex]=c-u}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Xo(t))throw new w(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function iT(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new zP(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new L_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new L_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class zP{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qP{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class L_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new qP,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function j_(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function B_(){return new Da([new F_])}let Da=(()=>{class e{static#e=this.\u0275prov=q({token:e,providedIn:"root",factory:B_});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||B_()),deps:[[e,new ou,new su]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new w(901,!1)}}return e})();const ZP=C_(null,"core",[]);let YP=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(F(ai))};static#t=this.\u0275mod=hr({type:e});static#n=this.\u0275inj=Bn({})}return e})(),ld=null;function ud(){return ld}class ck{}const fn=new O("DocumentToken");class Xk{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Dd=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Xk(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),oD(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{oD(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(M(Gt),M(cn),M(Da))};static#t=this.\u0275dir=ft({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function oD(e,t){e.context.$implicit=t.item}let wd=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new eO,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){aD("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){aD("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(M(Gt),M(cn))};static#t=this.\u0275dir=ft({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return e})();class eO{constructor(){this.$implicit=null,this.ngIf=null}}function aD(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${De(t)}'.`)}let SO=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=hr({type:e});static#n=this.\u0275inj=Bn({})}return e})();function dD(e){return"server"===e}class XO extends ck{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Md extends XO{static makeCurrent(){!function uk(e){ld||(ld=e)}(new Md)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function ex(){return Is=Is||document.querySelector("base"),Is?Is.getAttribute("href"):null}();return null==n?null:function tx(e){xa=xa||document.createElement("a"),xa.setAttribute("href",e);const t=xa.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Is=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Zk(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let xa,Is=null,rx=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();const Ad=new O("EventManagerPlugins");let mD=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new w(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(F(Ad),F(le))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();class yD{constructor(t){this._doc=t}}const Nd="ng-app-id";let vD=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dD(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Nd}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Nd),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Nd,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(F(fn),F($o),F(jg,8),F($r))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();const Pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kd=/%COMP%/g,ax=new O("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function DD(e,t){return t.map(n=>n.replace(kd,e))}let Od=(()=>{class e{constructor(n,r,i,s,o,a,l,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=dD(a),this.defaultRenderer=new xd(n,o,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===dt.ShadowDom&&(r={...r,encapsulation:dt.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof bD?i.applyToHost(n):i instanceof Rd&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case dt.Emulated:s=new bD(l,u,r,this.appId,c,o,a,d);break;case dt.ShadowDom:return new dx(l,u,n,r,o,a,this.nonce,d);default:s=new Rd(l,u,r,c,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(F(mD),F(vD),F($o),F(ax),F(fn),F($r),F(le),F(jg))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();class xd{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Pd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(wD(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(wD(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=Pd[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Pd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Tn.DashCase|Tn.Important)?t.style.setProperty(n,r,i&Tn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ud().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function wD(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class dx extends xd{constructor(t,n,r,i,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=DD(i.id,i.styles);for(const c of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Rd extends xd{constructor(t,n,r,i,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?DD(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class bD extends Rd{constructor(t,n,r,i,s,o,a,l){const u=i+"-"+r.id;super(t,n,r,s,o,a,l,u),this.contentAttr=function lx(e){return"_ngcontent-%COMP%".replace(kd,e)}(u),this.hostAttr=function ux(e){return"_nghost-%COMP%".replace(kd,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let fx=(()=>{class e extends yD{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(F(fn))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();const ED=["alt","control","meta","shift"],hx={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},px={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let gx=(()=>{class e extends yD{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ud().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ED.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=hx[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ED.forEach(o=>{o!==i&&(0,px[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(F(fn))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();const _x=C_(ZP,"browser",[{provide:$r,useValue:"browser"},{provide:Fg,useValue:function mx(){Md.makeCurrent()},multi:!0},{provide:fn,useFactory:function vx(){return function jC(e){Eu=e}(document),document},deps:[]}]),Dx=new O(""),ID=[{provide:ma,useClass:class nx{addToWindow(t){ee.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new w(5103,!1);return s},ee.getAllAngularTestabilities=()=>t.getAllTestabilities(),ee.getAllAngularRootElements=()=>t.getAllRootElements(),ee.frameworkStabilizers||(ee.frameworkStabilizers=[]),ee.frameworkStabilizers.push(r=>{const i=ee.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ud().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:__,useClass:Jc,deps:[le,Xc,ma]},{provide:Jc,useClass:Jc,deps:[le,Xc,ma]}],TD=[{provide:ku,useValue:"root"},{provide:on,useFactory:function yx(){return new on},deps:[]},{provide:Ad,useClass:fx,multi:!0,deps:[fn,le,$r]},{provide:Ad,useClass:gx,multi:!0,deps:[fn]},Od,vD,mD,{provide:ts,useExisting:Od},{provide:class NO{},useClass:rx,deps:[]},[]];let MD=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:$o,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(F(Dx,12))};static#t=this.\u0275mod=hr({type:e});static#n=this.\u0275inj=Bn({providers:[...TD,...ID],imports:[SO,YP]})}return e})();function kD(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(l){kD(s,r,i,o,a,"next",l)}function a(l){kD(s,r,i,o,a,"throw",l)}o(void 0)})}}typeof window<"u"&&window;class Tx extends Je{constructor(t,n){super()}schedule(t,n=0){return this}}const Ra={setInterval(e,t,...n){const{delegate:r}=Ra;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=Ra;return(t?.clearInterval||clearInterval)(e)},delegate:void 0},OD={now:()=>(OD.delegate||Date).now(),delegate:void 0};class Ts{constructor(t,n=Ts.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Ts.now=OD.now;const xD=new class Ax extends Ts{constructor(t,n=Ts.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}(class Mx extends Tx{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(t,n,r=0){return Ra.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&Ra.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,cr(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}),Nx=xD;function RD(e=0,t=xD){return e<0&&(e=0),function kx(e=0,t,n=Nx){let r=-1;return null!=t&&(th(t)?n=t:r=t),new Fe(i=>{let s=function Px(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(e,e,t)}function FD(e,t=!1){return yn((n,r)=>{let i=0;n.subscribe(vn(r,s=>{const o=e(s,i++);(o||t)&&r.next(s),!o&&r.complete()}))})}class Ld extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class xx extends Ld{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Rx extends Ld{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Fx extends Ld{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var LD=function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e}(LD||{});class jx{constructor(t,{headers:n={},customFetch:r,region:i=LD.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=(e=>{let t;return t=e||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Ee.bind(Ee,470)).then(({default:r})=>r(...n)):fetch),(...n)=>t(...n)})(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let u,a={},{region:l}=n;l||(l=this.region),l&&"any"!==l&&(a["x-region"]=l),o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):"string"==typeof o?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(p=>{throw new xx(p)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Rx(c);if(!c.ok)throw new Fx(c);let h,f=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===f?yield c.json():"application/octet-stream"===f?yield c.blob():"multipart/form-data"===f?yield c.formData():yield c.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var jd=Ee(470);class $x extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class Bx{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,this.fetch=t.fetch?t.fetch:typeof fetch>"u"?jd.default:fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,n){var r=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var o=v(function*(a){var l,u,c;let d=null,f=null,h=null,p=a.status,g=a.statusText;if(a.ok){if("HEAD"!==r.method){const b=yield a.text();""===b||(f="text/csv"===r.headers.Accept||r.headers.Accept&&r.headers.Accept.includes("application/vnd.pgrst.plan+text")?b:JSON.parse(b))}const _=null===(l=r.headers.Prefer)||void 0===l?void 0:l.match(/count=(exact|planned|estimated)/),y=null===(u=a.headers.get("content-range"))||void 0===u?void 0:u.split("/");_&&y&&y.length>1&&(h=parseInt(y[1])),r.isMaybeSingle&&"GET"===r.method&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,p=406,g="Not Acceptable"):f=1===f.length?f[0]:null)}else{const _=yield a.text();try{d=JSON.parse(_),Array.isArray(d)&&404===a.status&&(f=[],d=null,p=200,g="OK")}catch{404===a.status&&""===_?(p=204,g="No Content"):d={message:_}}if(d&&r.isMaybeSingle&&!(null===(c=d?.details)||void 0===c)&&c.includes("0 rows")&&(d=null,p=200,g="OK"),d&&r.shouldThrowOnError)throw new $x(d)}return{error:d,data:f,count:h,status:p,statusText:g}});return function(a){return o.apply(this,arguments)}}());return this.shouldThrowOnError||(s=s.catch(o=>{var a,l,u;return{error:{message:`${null!==(a=o?.name)&&void 0!==a?a:"FetchError"}: ${o?.message}`,details:`${null!==(l=o?.stack)&&void 0!==l?l:""}`,hint:"",code:`${null!==(u=o?.code)&&void 0!==u?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}}class Vx extends Bx{select(t){let n=!1;const r=(t??"*").split("").map(i=>/\s/.test(i)&&!n?"":('"'===i&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){return this.url.searchParams.set(typeof r>"u"?"limit":`${r}.limit`,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:i=r}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(typeof i>"u"?"offset":`${i}.offset`,`${t}`),this.url.searchParams.set(o,""+(n-t+1)),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="GET"===this.method?"application/json":"application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,this}rollback(){var t;return(null!==(t=this.headers.Prefer)&&void 0!==t?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ui extends Vx{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(i=>"string"==typeof i&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return"string"==typeof n?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return"string"==typeof n?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return this.url.searchParams.append(t,"string"==typeof n?`ov.${n}`:`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";return"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w"),this.url.searchParams.append(t,`${s}fts${void 0===r?"":`(${r})`}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){return this.url.searchParams.append(r?`${r}.or`:"or",`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}}class Hx{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":('"'===a&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ui({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ui({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==n&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new ui({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new ui({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ui({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Ux={"X-Client-Info":"postgrest-js/1.10.0"};class $d{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},Ux),n),this.schemaName=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new Hx(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new $d(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${t}`);let a;r?(s="HEAD",Object.entries(n).forEach(([u,c])=>{o.searchParams.append(u,`${c}`)})):(s="POST",a=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new ui({method:s,url:o,headers:l,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}}const zx={"X-Client-Info":"realtime-js/2.9.3"};var Ms=function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e}(Ms||{}),vt=function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e}(vt||{}),Wt=function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e}(Wt||{}),$D=function(e){return e.websocket="websocket",e}($D||{}),ci=function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e}(ci||{});class BD{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Wx{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n("string"==typeof t?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+i));o+=i;const l=r.decode(t.slice(o,o+s));return o+=s,{ref:null,topic:a,event:l,payload:JSON.parse(r.decode(t.slice(o,t.byteLength)))}}}class Bd{constructor(t,n,r={},i=1e4){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}class As{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=As.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=As.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(s,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=s[u];if(d){const f=c.map(m=>m.presence_ref),h=d.map(m=>m.presence_ref),p=c.filter(m=>h.indexOf(m.presence_ref)<0),g=d.filter(m=>f.indexOf(m.presence_ref)<0);p.length>0&&(a[u]=p),g.length>0&&(l[u]=g)}else a[u]=c}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const c=null!==(u=t[a])&&void 0!==u?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const d=t[a].map(h=>h.presence_ref),f=c.filter(h=>d.indexOf(h.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,l),0===u.length&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return n[r]="metas"in i?i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var se=function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e}(se||{});const VD=(e,t,n={})=>{var r;const i=null!==(r=n.skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=Qx(o,e,t,i),s),{})},Qx=(e,t,n,r)=>{const i=t.find(a=>a.name===e),s=i?.type,o=n[e];return s&&!r.includes(s)?HD(s,o):Vd(o)},HD=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return Xx(t,n)}switch(e){case se.bool:return Zx(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return Yx(t);case se.json:case se.jsonb:return Jx(t);case se.timestamp:return e1(t);default:return Vd(t)}},Vd=e=>e,Zx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yx=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Jx=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Xx=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1;if("{"===e[0]&&"}"===e[n]){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>HD(t,a))}return e},e1=e=>"string"==typeof e?e.replace(" ","T"):e;class Hd{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bd(this,Wt.join,this.params,this.timeout),this.rejoinTimer=new BD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wt.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new As(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(u=>t&&t("CHANNEL_ERROR",u)),this._onClose(()=>t&&t("CLOSED"));const a={},l={broadcast:s,presence:o,postgres_changes:null!==(i=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(u=>u.filter))&&void 0!==i?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==u){const d=this.bindings.postgres_changes,f=null!==(c=d?.length)&&void 0!==c?c:0,h=[];for(let p=0;p<f;p++){const g=d[p],{filter:{event:m,schema:_,table:y,filter:b}}=g,E=u&&u[p];if(!E||E.event!==m||E.schema!==_||E.table!==y||E.filter!==b)return this.unsubscribe(),void(t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));h.push(Object.assign(Object.assign({},g),{id:E.id}))}return this.bindings.postgres_changes=h,void(t&&t("SUBSCRIBED"))}t&&t("SUBSCRIBED")}).receive("error",u=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(t,n={}){var r=this;return v(function*(){return yield r.send({type:"presence",event:"track",payload:t},n.timeout||r.timeout)})()}untrack(t={}){var n=this;return v(function*(){return yield n.send({type:"presence",event:"untrack"},t)})()}on(t,n,r){return this._on(t,n,r)}send(t,n={}){var r=this;return v(function*(){var i,s;if(r._canPush()||"broadcast"!==t.type)return new Promise(o=>{var a,l,u;const c=r._push(t.type,t,n.timeout||r.timeout);"broadcast"===t.type&&!(null!==(u=null===(l=null===(a=r.params)||void 0===a?void 0:a.config)||void 0===l?void 0:l.broadcast)&&void 0!==u&&u.ack)&&o("ok"),c.receive("ok",()=>o("ok")),c.receive("timeout",()=>o("timed out"))});{const{event:o,payload:a}=t,l={method:"POST",headers:{apikey:null!==(i=r.socket.apiKey)&&void 0!==i?i:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:r.subTopic,event:o,payload:a}]})};try{return(yield r._fetchWithTimeout(r.broadcastEndpointURL,l,null!==(s=n.timeout)&&void 0!==s?s:r.timeout)).ok?"ok":"error"}catch(u){return"AbortError"===u.name?"timed out":"error"}}})()}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Bd(this,Wt.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"}_fetchWithTimeout(t,n,r){var i=this;return v(function*(){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=yield i.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a})()}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Bd(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Wt;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(i=this.bindings.postgres_changes)||void 0===i||i.filter(h=>{var p,g,m;return"*"===(null===(p=h.filter)||void 0===p?void 0:p.event)||(null===(m=null===(g=h.filter)||void 0===g?void 0:g.event)||void 0===m?void 0:m.toLocaleLowerCase())===o}).map(h=>h.callback(f,r)):null===(s=this.bindings[o])||void 0===s||s.filter(h=>{var p,g,m,_,y,b;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in h){const E=h.id,T=null===(p=h.filter)||void 0===p?void 0:p.event;return E&&(null===(g=n.ids)||void 0===g?void 0:g.includes(E))&&("*"===T||T?.toLocaleLowerCase()===(null===(m=n.data)||void 0===m?void 0:m.type.toLocaleLowerCase()))}{const E=null===(y=null===(_=h?.filter)||void 0===_?void 0:_.event)||void 0===y?void 0:y.toLocaleLowerCase();return"*"===E||E===(null===(b=n?.event)||void 0===b?void 0:b.toLocaleLowerCase())}}return h.type.toLocaleLowerCase()===o}).map(h=>{if("object"==typeof f&&"ids"in f){const p=f.data,{schema:g,table:m,commit_timestamp:_,type:y,errors:b}=p;f=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:_,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(p))}h.callback(f,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!((null===(s=i.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&Hd.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Wt.close,{},t)}_onError(t){this._on(Wt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return("INSERT"===t.type||"UPDATE"===t.type)&&(n.new=VD(t.columns,t.record)),("UPDATE"===t.type||"DELETE"===t.type)&&(n.old=VD(t.columns,t.old_record)),n}}const i1=()=>{},s1=typeof WebSocket<"u";class o1{constructor(t,n){var i,r=this;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=zx,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=i1,this.conn=null,this.sendBuffer=[],this.serializer=new Wx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let a;return a=o||(typeof fetch>"u"?(...l)=>Promise.resolve().then(Ee.bind(Ee,470)).then(({default:u})=>u(...l)):fetch),(...l)=>a(...l)},this.endPoint=`${t}/${$D.websocket}`,this.transport=n?.transport?n.transport:null,n?.params&&(this.params=n.params),n?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n?.timeout&&(this.timeout=n.timeout),n?.logger&&(this.logger=n.logger),n?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=null===(i=n?.params)||void 0===i?void 0:i.apikey;s&&(this.accessToken=s,this.apiKey=s),this.reconnectAfterMs=n?.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n?.encode?n.encode:(o,a)=>a(JSON.stringify(o)),this.decode=n?.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new BD(v(function*(){r.disconnect(),r.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!this.conn){if(this.transport)return void(this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers}));if(s1)return this.conn=new WebSocket(this._endPointURL()),void this.setupConnection();this.conn=new a1(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Ee.e(350).then(Ee.t.bind(Ee,350,23)).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){var n=this;return v(function*(){const r=yield t.unsubscribe();return 0===n.channels.length&&n.disconnect(),r})()}removeAllChannels(){var t=this;return v(function*(){const n=yield Promise.all(t.channels.map(r=>r.unsubscribe()));return t.disconnect(),n})()}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ms.connecting:return ci.Connecting;case Ms.open:return ci.Open;case Ms.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}channel(t,n={config:{}}){const r=new Hd(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;null===(l=this.conn)||void 0===l||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Wt.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return this.ref=t===this.ref?0:t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;(o&&o===this.pendingHeartbeatRef||i===s?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Wt.error))}_appendParams(t,n){if(0===Object.keys(n).length)return t;const r=t.match(/\?/)?"&":"?";return`${t}${r}${new URLSearchParams(n)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(t=this.conn)||void 0===t||t.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class a1{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ms.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Ud extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Oe(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class l1 extends Ud{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class UD extends Ud{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}const zD=e=>{let t;return t=e||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Ee.bind(Ee,470)).then(({default:r})=>r(...n)):fetch),(...n)=>t(...n)};var di=function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const zd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),d1=(e,t)=>di(void 0,void 0,void 0,function*(){const n=yield function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Promise.resolve().then(Ee.bind(Ee,470))).Response:Response});e instanceof n?e.json().then(r=>{t(new l1(zd(r),e.status||500))}).catch(r=>{t(new UD(zd(r),r))}):t(new UD(zd(e),e))}),f1=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function Fa(e,t,n,r,i,s){return di(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,f1(t,r,i,s)).then(l=>{if(!l.ok)throw l;return r?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>d1(l,a))})})}function qd(e,t,n,r){return di(this,void 0,void 0,function*(){return Fa(e,"GET",t,n,r)})}function kn(e,t,n,r,i){return di(this,void 0,void 0,function*(){return Fa(e,"POST",t,r,i,n)})}function h1(e,t,n,r,i){return di(this,void 0,void 0,function*(){return Fa(e,"PUT",t,r,i,n)})}function qD(e,t,n,r,i){return di(this,void 0,void 0,function*(){return Fa(e,"DELETE",t,r,i,n)})}var _t=function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const p1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},GD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g1{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=zD(i)}uploadOrUpdate(t,n,r,i){return _t(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},GD),i),a=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl)):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),d=yield c.json();return c.ok?{data:{path:l,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}upload(t,n,r){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return _t(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:GD.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield d.json();return d.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t){return _t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const r=yield kn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new Ud("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:s},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(t,n,r){return _t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n){return _t(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}copy(t,n){return _t(this,void 0,void 0,function*(){try{return{data:{path:(yield kn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,r){return _t(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield kn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r?.download?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return _t(this,void 0,void 0,function*(){try{const i=yield kn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r?.download?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}})}download(t,n){return _t(this,void 0,void 0,function*(){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(n?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield qd(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Oe(a))return{data:null,error:a};throw a}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=n?.download?`download=${!0===n.download?"":n.download}`:"";""!==s&&i.push(s);const a=typeof n?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(n?.transform||{});""!==l&&i.push(l);let u=i.join("&");return""!==u&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return _t(this,void 0,void 0,function*(){try{return{data:yield qD(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}list(t,n,r){return _t(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},p1),n),{prefix:t||""});return{data:yield kn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Oe(i))return{data:null,error:i};throw i}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const m1={"X-Client-Info":"storage-js/2.5.5"};var fi=function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class y1{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},m1),n),this.fetch=zD(r)}listBuckets(){return fi(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}getBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield qd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return fi(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return fi(this,void 0,void 0,function*(){try{return{data:yield h1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return fi(this,void 0,void 0,function*(){try{return{data:yield qD(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}}class v1 extends y1{constructor(t,n={},r){super(t,n,r)}from(t){return new g1(this.url,this.headers,t,this.fetch)}}let Ns="";Ns=typeof Deno<"u"?"deno":typeof document<"u"?"web":typeof navigator<"u"&&"ReactNative"===navigator.product?"react-native":"node";const D1={"X-Client-Info":`supabase-js-${Ns}/2.39.3`};const C1=(e,t,n)=>{const r=(e=>{let t;return t=e||(typeof fetch>"u"?jd.default:fetch),(...n)=>t(...n)})(n),i=typeof Headers>"u"?jd.Headers:Headers;return(s,o)=>function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(void 0,void 0,void 0,function*(){var a;const l=null!==(a=yield t())&&void 0!==a?a:e;let u=new i(o?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})},Nt=()=>typeof document<"u",tr={tested:!1,writable:!1},Ps=()=>{if(!Nt())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch{return!1}if(tr.tested)return tr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),tr.tested=!0,tr.writable=!0}catch{tr.tested=!0,tr.writable=!1}return tr.writable};function Gd(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}const WD=e=>{let t;return t=e||(typeof fetch>"u"?(...n)=>Promise.resolve().then(Ee.bind(Ee,470)).then(({default:r})=>r(...n)):fetch),(...n)=>t(...n)},A1=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,nr=function(){var e=v(function*(t,n,r){yield t.setItem(n,JSON.stringify(r))});return function(n,r,i){return e.apply(this,arguments)}}(),La=function(){var e=v(function*(t,n){const r=yield t.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}});return function(n,r){return e.apply(this,arguments)}}(),Wd=function(){var e=v(function*(t,n){yield t.removeItem(n)});return function(n,r){return e.apply(this,arguments)}}();class ja{constructor(){this.promise=new ja.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}function KD(e){const n=e.split(".");if(3!==n.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function N1(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,i,s,o,a,l,u,n="",c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)o=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=o<<2|a>>4,i=(15&a)<<4|l>>2,s=(3&l)<<6|u,n+=String.fromCharCode(r),64!=l&&0!=i&&(n+=String.fromCharCode(i)),64!=u&&0!=s&&(n+=String.fromCharCode(s));return n}(n[1]))}function Kd(){return(Kd=v(function*(e){return yield new Promise(t=>{setTimeout(()=>t(null),e)})})).apply(this,arguments)}function O1(e){return("0"+e.toString(16)).substr(-2)}function hi(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,O1).join("")}function Qd(){return(Qd=v(function*(e){const n=(new TextEncoder).encode(e),r=yield crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})).apply(this,arguments)}function pi(e){return Zd.apply(this,arguments)}function Zd(){return Zd=v(function*(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=yield function x1(e){return Qd.apply(this,arguments)}(e);return function R1(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(n)}),Zd.apply(this,arguments)}ja.promiseConstructor=Promise;class Yd extends Error{constructor(t,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n}}function B(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class F1 extends Yd{constructor(t,n){super(t,n),this.name="AuthApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class QD extends Yd{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class rr extends Yd{constructor(t,n,r){super(t),this.name=n,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gi extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Jd extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class $a extends rr{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class Ba extends rr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ZD extends rr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xd extends rr{constructor(t,n){super(t,"AuthRetryableFetchError",n)}}function ef(e){return B(e)&&"AuthRetryableFetchError"===e.name}class j1 extends rr{constructor(t,n,r){super(t,"AuthWeakPasswordError",n),this.reasons=r}}const mi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),B1=[502,503,504];function YD(e){return tf.apply(this,arguments)}function tf(){return(tf=v(function*(e){if(!A1(e))throw new Xd(mi(e),0);if(B1.includes(e.status))throw new Xd(mi(e),e.status);let t;try{t=yield e.json()}catch(n){throw new QD(mi(n),n)}throw"object"==typeof t&&t&&"object"==typeof t.weak_password&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((n,r)=>n&&"string"==typeof r,!0)?new j1(mi(t),e.status,t.weak_password.reasons):new F1(mi(t),e.status||500)})).apply(this,arguments)}const V1=(e,t,n,r)=>{const i={method:e,headers:t?.headers||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function z(e,t,n,r){return nf.apply(this,arguments)}function nf(){return nf=v(function*(e,t,n,r){var i;const s=Object.assign({},r?.headers);r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=null!==(i=r?.query)&&void 0!==i?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield function H1(e,t,n,r,i,s){return rf.apply(this,arguments)}(e,t,n+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(l):{data:Object.assign({},l),error:null}}),nf.apply(this,arguments)}function rf(){return(rf=v(function*(e,t,n,r,i,s){const o=V1(t,r,i,s);let a;try{a=yield e(n,o)}catch(l){throw console.error(l),new Xd(mi(l),0)}if(a.ok||(yield YD(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(l){yield YD(l)}})).apply(this,arguments)}function ir(e){var t;let n=null;return function G1(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=function T1(e){return Math.round(Date.now()/1e3)+e}(e.expires_in))),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function JD(e){const t=ir(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((n,r)=>n&&"string"==typeof r,!0)&&(t.data.weak_password=e.weak_password),t}function On(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function U1(e){return{data:e,error:null}}function z1(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},user:Object.assign({},o)},error:null}}function q1(e){return e}class K1{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=WD(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,n="global"){var r=this;return v(function*(){try{return yield z(r.fetch,"POST",`${r.url}/logout?scope=${n}`,{headers:r.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(B(i))return{data:null,error:i};throw i}})()}inviteUserByEmail(t,n={}){var r=this;return v(function*(){try{return yield z(r.fetch,"POST",`${r.url}/invite`,{body:{email:t,data:n.data},headers:r.headers,redirectTo:n.redirectTo,xform:On})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}})()}generateLink(t){var n=this;return v(function*(){try{const{options:r}=t,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["options"]),s=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(s.new_email=i?.newEmail,delete s.newEmail),yield z(n.fetch,"POST",`${n.url}/admin/generate_link`,{body:s,headers:n.headers,xform:z1,redirectTo:r?.redirectTo})}catch(r){if(B(r))return{data:{properties:null,user:null},error:r};throw r}})()}createUser(t){var n=this;return v(function*(){try{return yield z(n.fetch,"POST",`${n.url}/admin/users`,{body:t,headers:n.headers,xform:On})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}})()}listUsers(t){var n=this;return v(function*(){var r,i,s,o,a,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=yield z(n.fetch,"GET",`${n.url}/admin/users`,{headers:n.headers,noResolveJson:!0,query:{page:null!==(i=null===(r=t?.page)||void 0===r?void 0:r.toString())&&void 0!==i?i:"",per_page:null!==(o=null===(s=t?.perPage)||void 0===s?void 0:s.toString())&&void 0!==o?o:""},xform:q1});if(d.error)throw d.error;const f=yield d.json(),h=null!==(a=d.headers.get("x-total-count"))&&void 0!==a?a:0,p=null!==(u=null===(l=d.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==u?u:[];return p.length>0&&(p.forEach(g=>{const m=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(g.split(";")[1].split("=")[1]);c[`${_}Page`]=m}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(B(c))return{data:{users:[]},error:c};throw c}})()}getUserById(t){var n=this;return v(function*(){try{return yield z(n.fetch,"GET",`${n.url}/admin/users/${t}`,{headers:n.headers,xform:On})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}})()}updateUserById(t,n){var r=this;return v(function*(){try{return yield z(r.fetch,"PUT",`${r.url}/admin/users/${t}`,{body:n,headers:r.headers,xform:On})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}})()}deleteUser(t,n=!1){var r=this;return v(function*(){try{return yield z(r.fetch,"DELETE",`${r.url}/admin/users/${t}`,{headers:r.headers,body:{should_soft_delete:n},xform:On})}catch(i){if(B(i))return{data:{user:null},error:i};throw i}})()}_listFactors(t){var n=this;return v(function*(){try{const{data:r,error:i}=yield z(n.fetch,"GET",`${n.url}/admin/users/${t.userId}/factors`,{headers:n.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:i}}catch(r){if(B(r))return{data:null,error:r};throw r}})()}_deleteFactor(t){var n=this;return v(function*(){try{return{data:yield z(n.fetch,"DELETE",`${n.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:n.headers}),error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}})()}}const J1={getItem:e=>Ps()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ps()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ps()&&globalThis.localStorage.removeItem(e)}};function tw(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const yi={debug:!!(globalThis&&Ps()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class nw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class eR extends nw{}function tR(e,t,n){return sf.apply(this,arguments)}function sf(){return sf=v(function*(e,t,n){yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),yi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),yield globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},function(){var i=v(function*(s){if(!s){if(0===t)throw yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new eR(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yi.debug)try{const o=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield n()}yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return yield n()}finally{yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}});return function(s){return i.apply(this,arguments)}}())}),sf.apply(this,arguments)}!function X1(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}();const nR={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:{"X-Client-Info":"gotrue-js/0.0.0"},flowType:"implicit",debug:!1},ks=3e4;function iw(e,t,n){return of.apply(this,arguments)}function of(){return(of=v(function*(e,t,n){return yield n()})).apply(this,arguments)}let rR=(()=>{class e{constructor(n){var i,s,r=this;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=e.nextInstanceID,e.nextInstanceID+=1,this.instanceID>0&&Nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},nR),n);if(this.logDebugMessages=!!o.debug,"function"==typeof o.debug&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new K1({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=WD(o.fetch),this.lock=o.lock||iw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.lock=o.lock?o.lock:Nt()&&null!==(i=globalThis?.navigator)&&void 0!==i&&i.locks?tR:iw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?o.storage?this.storage=o.storage:Ps()?this.storage=J1:(this.memoryStorage={},this.storage=tw(this.memoryStorage)):(this.memoryStorage={},this.storage=tw(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",function(){var a=v(function*(l){r._debug("received broadcast notification from other tab or client",l),yield r._notifyAllSubscribers(l.data.event,l.data.session,!1)});return function(l){return a.apply(this,arguments)}}())}this.initialize()}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (0.0.0) ${(new Date).toISOString()}`,...n),this}initialize(){var n=this;return v(function*(){return n.initializePromise||(n.initializePromise=v(function*(){return yield n._acquireLock(-1,v(function*(){return yield n._initialize()}))})()),yield n.initializePromise})()}_initialize(){var n=this;return v(function*(){try{const r=!!Nt()&&(yield n._isPKCEFlow());if(n._debug("#_initialize()","begin","is PKCE flow",r),r||n.detectSessionInUrl&&n._isImplicitGrantFlow()){const{data:i,error:s}=yield n._getSessionFromURL(r);if(s)return n._debug("#_initialize()","error detecting session from URL",s),"Identity is already linked"===s?.message||"Identity is already linked to another user"===s?.message||(yield n._removeSession()),{error:s};const{session:o,redirectType:a}=i;return n._debug("#_initialize()","detected session in URL",o,"redirect type",a),yield n._saveSession(o),setTimeout(v(function*(){"recovery"===a?yield n._notifyAllSubscribers("PASSWORD_RECOVERY",o):yield n._notifyAllSubscribers("SIGNED_IN",o)}),0),{error:null}}return yield n._recoverAndRefresh(),{error:null}}catch(r){return B(r)?{error:r}:{error:new QD("Unexpected error during initialization",r)}}finally{yield n._handleVisibilityChange(),n._debug("#_initialize()","end")}})()}signUp(n){var r=this;return v(function*(){var i,s,o;try{let a;if(yield r._removeSession(),"email"in n){const{email:f,password:h,options:p}=n;let g=null,m=null;if("pkce"===r.flowType){const _=hi();yield nr(r.storage,`${r.storageKey}-code-verifier`,_),g=yield pi(_),m=_===g?"plain":"s256"}a=yield z(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,redirectTo:p?.emailRedirectTo,body:{email:f,password:h,data:null!==(i=p?.data)&&void 0!==i?i:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:g,code_challenge_method:m},xform:ir})}else{if(!("phone"in n))throw new $a("You must provide either an email or phone number and a password");{const{phone:f,password:h,options:p}=n;a=yield z(r.fetch,"POST",`${r.url}/signup`,{headers:r.headers,body:{phone:f,password:h,data:null!==(s=p?.data)&&void 0!==s?s:{},channel:null!==(o=p?.channel)&&void 0!==o?o:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:ir})}}const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,d=l.user;return l.session&&(yield r._saveSession(l.session),yield r._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(B(a))return{data:{user:null,session:null},error:a};throw a}})()}signInWithPassword(n){var r=this;return v(function*(){try{let i;if(yield r._removeSession(),"email"in n){const{email:a,password:l,options:u}=n;i=yield z(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:JD})}else{if(!("phone"in n))throw new $a("You must provide either an email or phone number and a password");{const{phone:a,password:l,options:u}=n;i=yield z(r.fetch,"POST",`${r.url}/token?grant_type=password`,{headers:r.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:JD})}}const{data:s,error:o}=i;return o?{data:{user:null,session:null},error:o}:s&&s.session&&s.user?(s.session&&(yield r._saveSession(s.session),yield r._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:o}):{data:{user:null,session:null},error:new Jd}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}})()}signInWithOAuth(n){var r=this;return v(function*(){var i,s,o,a;return yield r._removeSession(),yield r._handleProviderSignIn(n.provider,{redirectTo:null===(i=n.options)||void 0===i?void 0:i.redirectTo,scopes:null===(s=n.options)||void 0===s?void 0:s.scopes,queryParams:null===(o=n.options)||void 0===o?void 0:o.queryParams,skipBrowserRedirect:null===(a=n.options)||void 0===a?void 0:a.skipBrowserRedirect})})()}exchangeCodeForSession(n){var r=this;return v(function*(){return yield r.initializePromise,r._acquireLock(-1,v(function*(){return r._exchangeCodeForSession(n)}))})()}_exchangeCodeForSession(n){var r=this;return v(function*(){const i=yield La(r.storage,`${r.storageKey}-code-verifier`),[s,o]=(i??"").split("/"),{data:a,error:l}=yield z(r.fetch,"POST",`${r.url}/token?grant_type=pkce`,{headers:r.headers,body:{auth_code:n,code_verifier:s},xform:ir});return yield Wd(r.storage,`${r.storageKey}-code-verifier`),l?{data:{user:null,session:null,redirectType:null},error:l}:a&&a.session&&a.user?(a.session&&(yield r._saveSession(a.session),yield r._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:l}):{data:{user:null,session:null,redirectType:null},error:new Jd}})()}signInWithIdToken(n){var r=this;return v(function*(){yield r._removeSession();try{const{options:i,provider:s,token:o,access_token:a,nonce:l}=n,u=yield z(r.fetch,"POST",`${r.url}/token?grant_type=id_token`,{headers:r.headers,body:{provider:s,id_token:o,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:ir}),{data:c,error:d}=u;return d?{data:{user:null,session:null},error:d}:c&&c.session&&c.user?(c.session&&(yield r._saveSession(c.session),yield r._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d}):{data:{user:null,session:null},error:new Jd}}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}})()}signInWithOtp(n){var r=this;return v(function*(){var i,s,o,a,l;try{if(yield r._removeSession(),"email"in n){const{email:u,options:c}=n;let d=null,f=null;if("pkce"===r.flowType){const p=hi();yield nr(r.storage,`${r.storageKey}-code-verifier`,p),d=yield pi(p),f=p===d?"plain":"s256"}const{error:h}=yield z(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{email:u,data:null!==(i=c?.data)&&void 0!==i?i:{},create_user:null===(s=c?.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in n){const{phone:u,options:c}=n,{data:d,error:f}=yield z(r.fetch,"POST",`${r.url}/otp`,{headers:r.headers,body:{phone:u,data:null!==(o=c?.data)&&void 0!==o?o:{},create_user:null===(a=c?.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:null!==(l=c?.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:f}}throw new $a("You must provide either an email or phone number.")}catch(u){if(B(u))return{data:{user:null,session:null},error:u};throw u}})()}verifyOtp(n){var r=this;return v(function*(){var i,s;try{let o,a;"email_change"!==n.type&&"phone_change"!==n.type&&(yield r._removeSession()),"options"in n&&(o=null===(i=n.options)||void 0===i?void 0:i.redirectTo,a=null===(s=n.options)||void 0===s?void 0:s.captchaToken);const{data:l,error:u}=yield z(r.fetch,"POST",`${r.url}/verify`,{headers:r.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:ir});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c?.access_token&&(yield r._saveSession(c),yield r._notifyAllSubscribers("recovery"==n.type?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(o){if(B(o))return{data:{user:null,session:null},error:o};throw o}})()}signInWithSSO(n){var r=this;return v(function*(){var i,s,o;try{yield r._removeSession();let a=null,l=null;if("pkce"===r.flowType){const u=hi();yield nr(r.storage,`${r.storageKey}-code-verifier`,u),a=yield pi(u),l=u===a?"plain":"s256"}return yield z(r.fetch,"POST",`${r.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:null!==(s=null===(i=n.options)||void 0===i?void 0:i.redirectTo)&&void 0!==s?s:void 0}),null!==(o=n?.options)&&void 0!==o&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:r.headers,xform:U1})}catch(a){if(B(a))return{data:null,error:a};throw a}})()}reauthenticate(){var n=this;return v(function*(){return yield n.initializePromise,yield n._acquireLock(-1,v(function*(){return yield n._reauthenticate()}))})()}_reauthenticate(){var n=this;return v(function*(){try{return yield n._useSession(function(){var r=v(function*(i){const{data:{session:s},error:o}=i;if(o)throw o;if(!s)throw new gi;const{error:a}=yield z(n.fetch,"GET",`${n.url}/reauthenticate`,{headers:n.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}});return function(i){return r.apply(this,arguments)}}())}catch(r){if(B(r))return{data:{user:null,session:null},error:r};throw r}})()}resend(n){var r=this;return v(function*(){try{"email_change"!=n.type&&"phone_change"!=n.type&&(yield r._removeSession());const i=`${r.url}/resend`;if("email"in n){const{email:s,type:o,options:a}=n,{error:l}=yield z(r.fetch,"POST",i,{headers:r.headers,body:{email:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in n){const{phone:s,type:o,options:a}=n,{data:l,error:u}=yield z(r.fetch,"POST",i,{headers:r.headers,body:{phone:s,type:o,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new $a("You must provide either an email or phone number and a type")}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}})()}getSession(){var n=this;return v(function*(){return yield n.initializePromise,n._acquireLock(-1,v(function*(){return n._useSession(function(){var r=v(function*(i){return i});return function(i){return r.apply(this,arguments)}}())}))})()}_acquireLock(n,r){var i=this;return v(function*(){i._debug("#_acquireLock","begin",n);try{if(i.lockAcquired){const s=i.pendingInLock.length?i.pendingInLock[i.pendingInLock.length-1]:Promise.resolve(),o=v(function*(){return yield s,yield r()})();return i.pendingInLock.push(v(function*(){try{yield o}catch{}})()),o}return yield i.lock(`lock:${i.storageKey}`,n,v(function*(){i._debug("#_acquireLock","lock acquired for storage key",i.storageKey);try{i.lockAcquired=!0;const s=r();for(i.pendingInLock.push(v(function*(){try{yield s}catch{}})()),yield s;i.pendingInLock.length;){const o=[...i.pendingInLock];yield Promise.all(o),i.pendingInLock.splice(0,o.length)}return yield s}finally{i._debug("#_acquireLock","lock released for storage key",i.storageKey),i.lockAcquired=!1}}))}finally{i._debug("#_acquireLock","end")}})()}_useSession(n){var r=this;return v(function*(){r._debug("#_useSession","begin");try{const i=yield r.__loadSession();return yield n(i)}finally{r._debug("#_useSession","end")}})()}__loadSession(){var n=this;return v(function*(){n._debug("#__loadSession()","begin"),n.lockAcquired||n._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let r=null;const i=yield La(n.storage,n.storageKey);if(n._debug("#getSession()","session from storage",i),null!==i&&(n._isValidSession(i)?r=i:(n._debug("#getSession()","session from storage is not valid"),yield n._removeSession())),!r)return{data:{session:null},error:null};const s=!!r.expires_at&&r.expires_at<=Date.now()/1e3;if(n._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",r.expires_at),!s)return{data:{session:r},error:null};const{session:o,error:a}=yield n._callRefreshToken(r.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{n._debug("#__loadSession()","end")}})()}getUser(n){var r=this;return v(function*(){return n?yield r._getUser(n):(yield r.initializePromise,r._acquireLock(-1,v(function*(){return yield r._getUser()})))})()}_getUser(n){var r=this;return v(function*(){try{return n?yield z(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:n,xform:On}):yield r._useSession(function(){var i=v(function*(s){var o,a;const{data:l,error:u}=s;if(u)throw u;return yield z(r.fetch,"GET",`${r.url}/user`,{headers:r.headers,jwt:null!==(a=null===(o=l.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0,xform:On})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:{user:null},error:i};throw i}})()}updateUser(n,r={}){var i=this;return v(function*(){return yield i.initializePromise,yield i._acquireLock(-1,v(function*(){return yield i._updateUser(n,r)}))})()}_updateUser(n,r={}){var i=this;return v(function*(){try{return yield i._useSession(function(){var s=v(function*(o){const{data:a,error:l}=o;if(l)throw l;if(!a.session)throw new gi;const u=a.session;let c=null,d=null;if("pkce"===i.flowType&&null!=n.email){const p=hi();yield nr(i.storage,`${i.storageKey}-code-verifier`,p),c=yield pi(p),d=p===c?"plain":"s256"}const{data:f,error:h}=yield z(i.fetch,"PUT",`${i.url}/user`,{headers:i.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:d}),jwt:u.access_token,xform:On});if(h)throw h;return u.user=f.user,yield i._saveSession(u),yield i._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}});return function(o){return s.apply(this,arguments)}}())}catch(s){if(B(s))return{data:{user:null},error:s};throw s}})()}_decodeJWT(n){return KD(n)}setSession(n){var r=this;return v(function*(){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._setSession(n)}))})()}_setSession(n){var r=this;return v(function*(){try{if(!n.access_token||!n.refresh_token)throw new gi;const i=Date.now()/1e3;let s=i,o=!0,a=null;const l=KD(n.access_token);if(l.exp&&(s=l.exp,o=s<=i),o){const{session:u,error:c}=yield r._callRefreshToken(n.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:c}=yield r._getUser(n.access_token);if(c)throw c;a={access_token:n.access_token,refresh_token:n.refresh_token,user:u.user,token_type:"bearer",expires_in:s-i,expires_at:s},yield r._saveSession(a),yield r._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(i){if(B(i))return{data:{session:null,user:null},error:i};throw i}})()}refreshSession(n){var r=this;return v(function*(){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._refreshSession(n)}))})()}_refreshSession(n){var r=this;return v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o;if(!n){const{data:u,error:c}=s;if(c)throw c;n=null!==(o=u.session)&&void 0!==o?o:void 0}if(!n?.refresh_token)throw new gi;const{session:a,error:l}=yield r._callRefreshToken(n.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:{user:null,session:null},error:i};throw i}})()}_getSessionFromURL(n){var r=this;return v(function*(){try{if(!Nt())throw new Ba("No browser detected.");if("implicit"===r.flowType&&!r._isImplicitGrantFlow())throw new Ba("Not a valid implicit grant flow url.");if("pkce"==r.flowType&&!n)throw new ZD("Not a valid PKCE flow url.");const i=Gd(window.location.href);if(n){if(!i.code)throw new ZD("No code detected.");const{data:E,error:T}=yield r._exchangeCodeForSession(i.code);if(T)throw T;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:E.session,redirectType:null},error:null}}if(i.error||i.error_description||i.error_code)throw new Ba(i.error_description||"Error in URL with unspecified error_description",{error:i.error||"unspecified_error",code:i.error_code||"unspecified_code"});const{provider_token:s,provider_refresh_token:o,access_token:a,refresh_token:l,expires_in:u,expires_at:c,token_type:d}=i;if(!(a&&u&&l&&d))throw new Ba("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(u);let p=f+h;c&&(p=parseInt(c));const g=p-f;1e3*g<=ks&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const m=p-h;f-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,p,f):f-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",m,p,f);const{data:_,error:y}=yield r._getUser(a);if(y)throw y;const b={provider_token:s,provider_refresh_token:o,access_token:a,expires_in:h,expires_at:p,refresh_token:l,token_type:d,user:_.user};return window.location.hash="",r._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:i.type},error:null}}catch(i){if(B(i))return{data:{session:null,redirectType:null},error:i};throw i}})()}_isImplicitGrantFlow(){const n=Gd(window.location.href);return!(!Nt()||!n.access_token&&!n.error_description)}_isPKCEFlow(){var n=this;return v(function*(){const r=Gd(window.location.href),i=yield La(n.storage,`${n.storageKey}-code-verifier`);return!(!r.code||!i)})()}signOut(n={scope:"global"}){var r=this;return v(function*(){return yield r.initializePromise,yield r._acquireLock(-1,v(function*(){return yield r._signOut(n)}))})()}_signOut({scope:n}={scope:"global"}){var r=this;return v(function*(){return yield r._useSession(function(){var i=v(function*(s){var o;const{data:a,error:l}=s;if(l)return{error:l};const u=null===(o=a.session)||void 0===o?void 0:o.access_token;if(u){const{error:c}=yield r.admin.signOut(u,n);if(c&&(!function L1(e){return B(e)&&"AuthApiError"===e.name}(c)||404!==c.status&&401!==c.status))return{error:c}}return"others"!==n&&(yield r._removeSession(),yield Wd(r.storage,`${r.storageKey}-code-verifier`),yield r._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}});return function(s){return i.apply(this,arguments)}}())})()}onAuthStateChange(n){var r=this;const i=function M1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}(),s={id:i,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,s),v(function*(){yield r.initializePromise,yield r._acquireLock(-1,v(function*(){r._emitInitialSession(i)}))})(),{data:{subscription:s}}}_emitInitialSession(n){var r=this;return v(function*(){return yield r._useSession(function(){var i=v(function*(s){var o,a;try{const{data:{session:l},error:u}=s;if(u)throw u;yield null===(o=r.stateChangeEmitters.get(n))||void 0===o?void 0:o.callback("INITIAL_SESSION",l),r._debug("INITIAL_SESSION","callback id",n,"session",l)}catch(l){yield null===(a=r.stateChangeEmitters.get(n))||void 0===a?void 0:a.callback("INITIAL_SESSION",null),r._debug("INITIAL_SESSION","callback id",n,"error",l),console.error(l)}});return function(s){return i.apply(this,arguments)}}())})()}resetPasswordForEmail(n,r={}){var i=this;return v(function*(){let s=null,o=null;if("pkce"===i.flowType){const a=hi();yield nr(i.storage,`${i.storageKey}-code-verifier`,`${a}/PASSWORD_RECOVERY`),s=yield pi(a),o=a===s?"plain":"s256"}try{return yield z(i.fetch,"POST",`${i.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:i.headers,redirectTo:r.redirectTo})}catch(a){if(B(a))return{data:null,error:a};throw a}})()}getUserIdentities(){var n=this;return v(function*(){var r;try{const{data:i,error:s}=yield n.getUser();if(s)throw s;return{data:{identities:null!==(r=i.user.identities)&&void 0!==r?r:[]},error:null}}catch(i){if(B(i))return{data:null,error:i};throw i}})()}linkIdentity(n){var r=this;return v(function*(){var i;try{const{data:s,error:o}=yield r._useSession(function(){var a=v(function*(l){var u,c,d,f,h;const{data:p,error:g}=l;if(g)throw g;const m=yield r._getUrlForProvider(`${r.url}/user/identities/authorize`,n.provider,{redirectTo:null===(u=n.options)||void 0===u?void 0:u.redirectTo,scopes:null===(c=n.options)||void 0===c?void 0:c.scopes,queryParams:null===(d=n.options)||void 0===d?void 0:d.queryParams,skipBrowserRedirect:!0});return yield z(r.fetch,"GET",m,{headers:r.headers,jwt:null!==(h=null===(f=p.session)||void 0===f?void 0:f.access_token)&&void 0!==h?h:void 0})});return function(l){return a.apply(this,arguments)}}());if(o)throw o;return Nt()&&!(null!==(i=n.options)&&void 0!==i&&i.skipBrowserRedirect)&&window.location.assign(s?.url),{data:{provider:n.provider,url:s?.url},error:null}}catch(s){if(B(s))return{data:{provider:n.provider,url:null},error:s};throw s}})()}unlinkIdentity(n){var r=this;return v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o,a;const{data:l,error:u}=s;if(u)throw u;return yield z(r.fetch,"DELETE",`${r.url}/user/identities/${n.identity_id}`,{headers:r.headers,jwt:null!==(a=null===(o=l.session)||void 0===o?void 0:o.access_token)&&void 0!==a?a:void 0})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:null,error:i};throw i}})()}_refreshAccessToken(n){var r=this;return v(function*(){const i=`#_refreshAccessToken(${n.substring(0,5)}...)`;r._debug(i,"begin");try{const s=Date.now();return yield function k1(e,t){return new Promise((r,i)=>{v(function*(){for(let s=0;s<1/0;s++)try{const o=yield e(s);if(!t(s,null,o))return void r(o)}catch(o){if(!t(s,o))return void i(o)}})()})}(function(){var o=v(function*(a){return yield function P1(e){return Kd.apply(this,arguments)}(200*a),r._debug(i,"refreshing attempt",a),yield z(r.fetch,"POST",`${r.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:r.headers,xform:ir})});return function(a){return o.apply(this,arguments)}}(),(o,a,l)=>l&&l.error&&ef(l.error)&&Date.now()+200*(o+1)-s<ks)}catch(s){if(r._debug(i,"error",s),B(s))return{data:{session:null,user:null},error:s};throw s}finally{r._debug(i,"end")}})()}_isValidSession(n){return"object"==typeof n&&null!==n&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}_handleProviderSignIn(n,r){var i=this;return v(function*(){const s=yield i._getUrlForProvider(`${i.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return i._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),Nt()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}})()}_recoverAndRefresh(){var n=this;return v(function*(){var r;const i="#_recoverAndRefresh()";n._debug(i,"begin");try{const s=yield La(n.storage,n.storageKey);if(n._debug(i,"session from storage",s),!n._isValidSession(s))return n._debug(i,"session is not valid"),void(null!==s&&(yield n._removeSession()));const o=Math.round(Date.now()/1e3),a=(null!==(r=s.expires_at)&&void 0!==r?r:1/0)<o+10;if(n._debug(i,`session has${a?"":" not"} expired with margin of 10s`),a){if(n.autoRefreshToken&&s.refresh_token){const{error:l}=yield n._callRefreshToken(s.refresh_token);l&&(console.error(l),ef(l)||(n._debug(i,"refresh failed with a non-retryable error, removing the session",l),yield n._removeSession()))}}else yield n._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return n._debug(i,"error",s),void console.error(s)}finally{n._debug(i,"end")}})()}_callRefreshToken(n){var r=this;return v(function*(){var i,s;if(!n)throw new gi;if(r.refreshingDeferred)return r.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;r._debug(o,"begin");try{r.refreshingDeferred=new ja;const{data:a,error:l}=yield r._refreshAccessToken(n);if(l)throw l;if(!a.session)throw new gi;yield r._saveSession(a.session),yield r._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={session:a.session,error:null};return r.refreshingDeferred.resolve(u),u}catch(a){if(r._debug(o,"error",a),B(a)){const l={session:null,error:a};return ef(a)||(yield r._removeSession(),yield r._notifyAllSubscribers("SIGNED_OUT",null)),null===(i=r.refreshingDeferred)||void 0===i||i.resolve(l),l}throw null===(s=r.refreshingDeferred)||void 0===s||s.reject(a),a}finally{r.refreshingDeferred=null,r._debug(o,"end")}})()}_notifyAllSubscribers(n,r,i=!0){var s=this;return v(function*(){const o=`#_notifyAllSubscribers(${n})`;s._debug(o,"begin",r,`broadcast = ${i}`);try{s.broadcastChannel&&i&&s.broadcastChannel.postMessage({event:n,session:r});const a=[],l=Array.from(s.stateChangeEmitters.values()).map(function(){var u=v(function*(c){try{yield c.callback(n,r)}catch(d){a.push(d)}});return function(c){return u.apply(this,arguments)}}());if(yield Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{s._debug(o,"end")}})()}_saveSession(n){var r=this;return v(function*(){r._debug("#_saveSession()",n),yield nr(r.storage,r.storageKey,n)})()}_removeSession(){var n=this;return v(function*(){n._debug("#_removeSession()"),yield Wd(n.storage,n.storageKey)})()}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Nt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){var n=this;return v(function*(){yield n._stopAutoRefresh(),n._debug("#_startAutoRefresh()");const r=setInterval(()=>n._autoRefreshTokenTick(),ks);n.autoRefreshTicker=r,r&&"object"==typeof r&&"function"==typeof r.unref?r.unref():typeof Deno<"u"&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(r),setTimeout(v(function*(){yield n.initializePromise,yield n._autoRefreshTokenTick()}),0)})()}_stopAutoRefresh(){var n=this;return v(function*(){n._debug("#_stopAutoRefresh()");const r=n.autoRefreshTicker;n.autoRefreshTicker=null,r&&clearInterval(r)})()}startAutoRefresh(){var n=this;return v(function*(){n._removeVisibilityChangedCallback(),yield n._startAutoRefresh()})()}stopAutoRefresh(){var n=this;return v(function*(){n._removeVisibilityChangedCallback(),yield n._stopAutoRefresh()})()}_autoRefreshTokenTick(){var n=this;return v(function*(){n._debug("#_autoRefreshTokenTick()","begin");try{yield n._acquireLock(0,v(function*(){try{const r=Date.now();try{return yield n._useSession(function(){var i=v(function*(s){const{data:{session:o}}=s;if(!o||!o.refresh_token||!o.expires_at)return void n._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*o.expires_at-r)/ks);n._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&(yield n._callRefreshToken(o.refresh_token))});return function(s){return i.apply(this,arguments)}}())}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{n._debug("#_autoRefreshTokenTick()","end")}}))}catch(r){if(!(r.isAcquireTimeout||r instanceof nw))throw r;n._debug("auto refresh token tick lock not available")}})()}_handleVisibilityChange(){var n=this;return v(function*(){if(n._debug("#_handleVisibilityChange()"),!Nt()||!window?.addEventListener)return n.autoRefreshToken&&n.startAutoRefresh(),!1;try{n.visibilityChangedCallback=v(function*(){return yield n._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",n.visibilityChangedCallback),yield n._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}})()}_onVisibilityChanged(n){var r=this;return v(function*(){const i=`#_onVisibilityChanged(${n})`;r._debug(i,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(r.autoRefreshToken&&r._startAutoRefresh(),n||(yield r.initializePromise,yield r._acquireLock(-1,v(function*(){"visible"===document.visibilityState?yield r._recoverAndRefresh():r._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&r.autoRefreshToken&&r._stopAutoRefresh()})()}_getUrlForProvider(n,r,i){var s=this;return v(function*(){const o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),"pkce"===s.flowType){const a=hi();yield nr(s.storage,`${s.storageKey}-code-verifier`,a);const l=yield pi(a),u=a===l?"plain":"s256";s._debug("PKCE","code verifier",`${a.substring(0,5)}...`,"code challenge",l,"method",u);const c=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(c.toString())}if(i?.queryParams){const a=new URLSearchParams(i.queryParams);o.push(a.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`})()}_unenroll(n){var r=this;return v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o;const{data:a,error:l}=s;return l?{data:null,error:l}:yield z(r.fetch,"DELETE",`${r.url}/factors/${n.factorId}`,{headers:r.headers,jwt:null===(o=a?.session)||void 0===o?void 0:o.access_token})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:null,error:i};throw i}})()}_enroll(n){var r=this;return v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o,a;const{data:l,error:u}=s;if(u)return{data:null,error:u};const{data:c,error:d}=yield z(r.fetch,"POST",`${r.url}/factors`,{body:{friendly_name:n.friendlyName,factor_type:n.factorType,issuer:n.issuer},headers:r.headers,jwt:null===(o=l?.session)||void 0===o?void 0:o.access_token});return d?{data:null,error:d}:(!(null===(a=c?.totp)||void 0===a)&&a.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:null,error:i};throw i}})()}_verify(n){var r=this;return v(function*(){return r._acquireLock(-1,v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o;const{data:a,error:l}=s;if(l)return{data:null,error:l};const{data:u,error:c}=yield z(r.fetch,"POST",`${r.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:r.headers,jwt:null===(o=a?.session)||void 0===o?void 0:o.access_token});return c?{data:null,error:c}:(yield r._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),yield r._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:c})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:null,error:i};throw i}}))})()}_challenge(n){var r=this;return v(function*(){return r._acquireLock(-1,v(function*(){try{return yield r._useSession(function(){var i=v(function*(s){var o;const{data:a,error:l}=s;return l?{data:null,error:l}:yield z(r.fetch,"POST",`${r.url}/factors/${n.factorId}/challenge`,{headers:r.headers,jwt:null===(o=a?.session)||void 0===o?void 0:o.access_token})});return function(s){return i.apply(this,arguments)}}())}catch(i){if(B(i))return{data:null,error:i};throw i}}))})()}_challengeAndVerify(n){var r=this;return v(function*(){const{data:i,error:s}=yield r._challenge({factorId:n.factorId});return s?{data:null,error:s}:yield r._verify({factorId:n.factorId,challengeId:i.id,code:n.code})})()}_listFactors(){var n=this;return v(function*(){const{data:{user:r},error:i}=yield n.getUser();if(i)return{data:null,error:i};const s=r?.factors||[],o=s.filter(a=>"totp"===a.factor_type&&"verified"===a.status);return{data:{all:s,totp:o},error:null}})()}_getAuthenticatorAssuranceLevel(){var n=this;return v(function*(){return n._acquireLock(-1,v(function*(){return yield n._useSession(function(){var r=v(function*(i){var s,o;const{data:{session:a},error:l}=i;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const u=n._decodeJWT(a.access_token);let c=null;u.aal&&(c=u.aal);let d=c;return(null!==(o=null===(s=a.user.factors)||void 0===s?void 0:s.filter(p=>"verified"===p.status))&&void 0!==o?o:[]).length>0&&(d="aal2"),{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:u.amr||[]},error:null}});return function(i){return r.apply(this,arguments)}}())}))})()}}return e.nextInstanceID=0,e})();class iR extends rR{constructor(t){super(t)}}const oR={headers:D1},aR={schema:"public"},lR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uR={};class cR{constructor(t,n,r){var i,s,o,a,l,u,c,d;if(this.supabaseUrl=t,this.supabaseKey=n,this.from=m=>this.rest.from(m),this.schema=m=>this.rest.schema(m),this.rpc=(m,_={},y)=>this.rest.rpc(m,_,y),!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const f=function S1(e){return e.replace(/\/$/,"")}(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,g=function I1(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:o,auth:a,realtime:l,global:u}=t;return{db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}(r??{},{db:aR,realtime:uR,auth:Object.assign(Object.assign({},lR),{storageKey:h}),global:oR});this.storageKey=null!==(s=null===(i=g.auth)||void 0===i?void 0:i.storageKey)&&void 0!==s?s:"",this.headers=null!==(a=null===(o=g.global)||void 0===o?void 0:o.headers)&&void 0!==a?a:{},this.auth=this._initSupabaseAuthClient(null!==(l=g.auth)&&void 0!==l?l:{},this.headers,null===(u=g.global)||void 0===u?void 0:u.fetch),this.fetch=C1(n,this._getAccessToken.bind(this),null===(c=g.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new $d(`${f}/rest/v1`,{headers:this.headers,schema:null===(d=g.db)||void 0===d?void 0:d.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new jx(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new v1(this.storageUrl,this.headers,this.fetch)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return null!==(n=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==n?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},l,u){return new iR({url:this.authUrl,headers:Object.assign(Object.assign({},{Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`}),l),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:u})}_initRealtimeClient(t){return new o1(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(t,n,r){"TOKEN_REFRESHED"!==t&&"SIGNED_IN"!==t||this.changedAccessToken===r?"SIGNED_OUT"===t&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==n&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(r??null),this.changedAccessToken=r)}}let vi=(()=>{class e{constructor(){this.supabase=new cR("https://eexyrtphepvrlecwllxt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVleHlydHBoZXB2cmxlY3dsbHh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDU5NTQ1MjYsImV4cCI6MjAyMTUzMDUyNn0.w1cdFHWN59fxUWXiSeJ2q48gOr4_ZzXd98BQpHucIaY",void 0),this.realtime=new Ot(0),this.supabase.channel("custom-update-channel").on("postgres_changes",{event:"UPDATE",schema:"public",table:"board"},s=>{this.realtime.next(s),console.log(s)}).subscribe()}getBoard(){var n=this;return v(function*(){let{data:r}=yield n.supabase.from("board").select("board");return r})()}updateBoard(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("board").update({board:n}).eq("id",1);console.log(i)})()}updatePlayer1(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("Game").update({player1_connection:n}).eq("id",2);return i})()}getPlayer1Connection(){var n=this;return v(function*(){let{data:r}=yield n.supabase.from("Game").select("player1_connection");return r})()}updatePlayer2(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("Game").update({player2_connection:n}).eq("id",2);return i})()}getPlayer2Connection(){var n=this;return v(function*(){let{data:r,error:i}=yield n.supabase.from("Game").select("player2_connection");return{connection:r,error:i}})()}getPlayer1Blocks(){var n=this;return v(function*(){let{data:r,error:i}=yield n.supabase.from("board").select("player1_blocks");return{blockIndexes:r,error:i}})()}getPlayer2Blocks(){var n=this;return v(function*(){let{data:r,error:i}=yield n.supabase.from("board").select("player2_blocks");return{blockIndexes:r,error:i}})()}updatePlayer1Blocks(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("board").update({player1_blocks:n}).eq("id",1);return i})()}updatePlayer2Blocks(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("board").update({player2_blocks:n}).eq("id",1);return i})()}updateTurns(n){var r=this;return v(function*(){const{error:i}=yield r.supabase.from("board").update({turns:n}).eq("id",1);return i})()}getTurns(){var n=this;return v(function*(){let{data:r,error:i}=yield n.supabase.from("board").select("turns");return{turns:r,error:i}})()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Os=(()=>{class e{constructor(n){this.databaseService=n,this.selected=new Ot([[0]]),this.possibleBlocks=new Ot([[[25]]]),this.blocks=this.generateEmptyBoard(),this.grid=new Ot(this.blocks),this.playernumber=new Ot(0),this.selectedIndex=new Ot(-1),this.indexes=new Ot([!0,!1]),this.numberOfTurns=new Ot(0),this.databaseService.realtime.subscribe(r=>this.numberOfTurns.next(r.new.turns))}getBlocks(){var n=this;return v(function*(){let r=yield n.databaseService.getBoard();n.blocks=r[0].board,n.grid.next(n.blocks)})()}reinitializePossibleBlocks(){var n=this;return v(function*(){let r=[];for(let i=0;i<21;i++)r.push(!0);yield n.databaseService.updatePlayer1Blocks(r),yield n.databaseService.updatePlayer2Blocks(r)})()}getPossibleBlocks(){return this.blocklist}updateSelected(n){this.selected.next(n)}updateGrid(n){this.databaseService.updateBoard(n),this.grid.next(n)}updatePossibleBlocks(n){}generateEmptyBoard(){let n=0,r=0,i=[];for(;n<14;){for(i.push([]);r<14;)i[n][r]=0,r++;n++,r=0}return i}reinitializeTurns(){this.databaseService.updateTurns(0)}addTurn(){var n=this;return v(function*(){let r=(yield n.databaseService.getTurns()).turns[0].turns;r+=1,yield n.databaseService.updateTurns(r)})()}static#e=this.\u0275fac=function(r){return new(r||e)(F(vi))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),af=(()=>{class e{constructor(n,r){this.databaseService=n,this.blockService=r,this.title="blokus (Laura edition)",this.playernumber=0,this.indexes=new Ot([!0,!1])}ngOnInit(){var n=this;return v(function*(){let r=yield n.databaseService.getPlayer1Connection();if(Date.now()-r[0].player1_connection<1e3){let i=yield n.databaseService.getPlayer2Connection();Date.now()-i.connection[0].player2_connection<1e3?console.log("sorry! the game is full"):(n.playernumber=2,n.blockService.playernumber.next(n.playernumber),RD(500).pipe(FD(()=>!0)).subscribe(v(function*(){yield n.databaseService.updatePlayer2(Date.now())})))}else n.playernumber=1,n.blockService.playernumber.next(n.playernumber),RD(500).pipe(FD(()=>!0)).subscribe(v(function*(){yield n.databaseService.updatePlayer1(Date.now())}));switch(n.playernumber){case 1:{let i=(yield n.databaseService.getPlayer1Blocks()).blockIndexes[0].player1_blocks;console.log(i),n.blockService.indexes.next(i),n.databaseService.realtime.subscribe(s=>n.indexes.next(s.new.player1_blocks));break}case 2:{let i=(yield n.databaseService.getPlayer2Blocks()).blockIndexes[0].player2_blocks;n.blockService.indexes.next(i),n.databaseService.realtime.subscribe(s=>n.indexes.next(s.new.player2_blocks));break}default:throw new Error("The game is full")}})()}static#e=this.\u0275fac=function(r){return new(r||e)(M(vi),M(Os))};static#t=this.\u0275cmp=fr({type:e,selectors:[["app-root"]],decls:5,vars:0,template:function(r,i){1&r&&(Kn(0,"app-reset-button")(1,"app-grid"),ye(2,"div"),Kn(3,"app-turn"),ve(),Kn(4,"app-user-blocks"))},styles:["div[_ngcontent-%COMP%]{width:100px;margin:auto;text-align:center}"]})}return e})();function fR(e,t){if(1&e){const n=wc();ye(0,"th",5,6),Qn("mouseenter",function(){const s=Fi(n).index,o=ke().index;return Li(ke().onMouseEnter(s,o))})("mouseout",function(){const s=Fi(n).index,o=ke().index;return Li(ke().onMouseOut(s,o))})("click",function(){const s=Fi(n).index,o=ke().index;return Li(ke().onMouseClick(s,o))}),ve()}if(2&e){const n=t.$implicit,r=t.index,i=ke().index,s=ke();ds("background-color",s.Painter(n)),Tc("test",s.changeCSSClass(r,i))("firstMove",s.IsFirstMove(r,i))}}function hR(e,t){if(1&e&&(ye(0,"tr",3),Ut(1,fR,2,6,"th",4),ve()),2&e){const n=t.$implicit;rt(1),St("ngForOf",n)}}function pR(e,t){if(1&e&&(ye(0,"div")(1,"p"),Yn(2),ve()()),2&e){const n=ke();rt(2),oa(n.placementError)}}let gR=(()=>{class e{constructor(n,r){this.blockService=n,this.databaseService=r,this.blocks=[],this.selectedBlock=[],this.databaseService.realtime.subscribe(i=>this.blocks=i.new.board),this.blockService.grid.subscribe(i=>this.blocks=i),this.blockService.selected.subscribe(i=>this.selectedBlock=i),this.playernumber=0,this.blockService.playernumber.subscribe(i=>this.playernumber=i),this.hoveredTiles=this.blockService.generateEmptyBoard(),this.placementError=null,this.i=-1,this.blockService.selectedIndex.subscribe(i=>this.i=i),this.turn=0,this.blockService.numberOfTurns.subscribe(i=>this.turn=i)}ngOnInit(){var n=this;return v(function*(){n.turn=yield(yield n.databaseService.getTurns()).turns[0].turns,n.blockService.getBlocks()})()}Painter(n){switch(n){case 1:return"Lightblue";case 2:return"pink";default:return"white"}}onMouseEnter(n,r){try{let i=this.selectedBlock.length,s=this.selectedBlock[0].length;for(let o=0;o<i;o++)for(let a=0;a<s;a++)0==this.hoveredTiles[r+o][n+a]&&(this.hoveredTiles[r+o][n+a]=this.selectedBlock[o][a]*this.playernumber)}catch{}}onMouseOut(n,r){try{let i=this.selectedBlock.length,s=this.selectedBlock[0].length;for(let o=0;o<i;o++)for(let a=0;a<s;a++)0!=this.hoveredTiles[r+o][n+a]&&(this.hoveredTiles[r+o][n+a]=0)}catch{}}changeCSSClass(n,r){return this.hoveredTiles[r][n]==this.playernumber}IsFirstMove(n,r){return!(0!=this.turn&&1!=this.turn||4!=n&&9!=n||4!=r&&9!=r||4==r&&9==n||9==r&&4==n||0!=this.blocks[r][n])}onMouseClick(n,r){var i=this;return v(function*(){if(i.turn%2==0&&2==i.playernumber)throw new Error("Not your turn !");if(i.turn%2==1&&1==i.playernumber)throw new Error("Not your turn !");let s=i.selectedBlock.length,o=i.selectedBlock[0].length;for(let a=0;a<s;a++)for(let l=0;l<o;l++)if(!(0==i.blocks[r+a][n+l]&&r+a<14&&n+l<14)&&0!=i.selectedBlock[a][l])throw console.log(i.blocks[r+a][n+l],r+a,n+l),i.placementError="Invalid placement !",new Error("inavlid placement !");if(0==i.turn||1==i.turn){let a=!1;for(let l=0;l<s;l++)for(let u=0;u<o;u++)console.log(n+l,r+u),n+u!=4&&n+u!=9||r+l!=4&&r+l!=9||r+l==4&&n+u==9||r+l==9&&n+u==4||0==i.selectedBlock[l][u]||(console.log("test"),a=!0);if(1!=a)throw new Error("Your first block must be on the gray square")}else{let a=!1;for(let l=0;l<s;l++)for(let u=0;u<o;u++)if(1==i.selectedBlock[l][u])for(let c=0;c<3;c++)for(let d=0;d<3;d++)console.log(r+l+c-1,n+u+d-1),i.blocks[r+l+c-1][n+u+d-1]==i.playernumber&&(a=!0);if(1!=a)throw new Error("error ! invalid placement. you must touch another of your blocks")}i.hoveredTiles=i.blockService.generateEmptyBoard();for(let a=0;a<s;a++)for(let l=0;l<o;l++)0==i.blocks[r+a][n+l]&&(i.blocks[r+a][n+l]=i.selectedBlock[a][l]*i.playernumber);switch(i.placementError=null,i.databaseService.updateBoard(i.blocks),i.blockService.updateSelected([]),i.playernumber){case 1:{let l=(yield i.databaseService.getPlayer1Blocks()).blockIndexes[0].player1_blocks;l[i.i]=!1,console.log(i.i),console.log(l),yield i.databaseService.updatePlayer1Blocks(l);break}case 2:{let l=(yield i.databaseService.getPlayer2Blocks()).blockIndexes[0].player2_blocks;l[i.i]=!1,yield i.databaseService.updatePlayer2Blocks(l);break}}i.blockService.addTurn()})()}static#e=this.\u0275fac=function(r){return new(r||e)(M(Os),M(vi))};static#t=this.\u0275cmp=fr({type:e,selectors:[["app-grid"]],decls:3,vars:2,consts:[[1,"table"],["class","ligne",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"ligne"],["class","colonne",3,"backgroundColor","test","firstMove","mouseenter","mouseout","click",4,"ngFor","ngForOf"],[1,"colonne",3,"mouseenter","mouseout","click"],["hoverName",""]],template:function(r,i){1&r&&(ye(0,"table",0),Ut(1,hR,2,1,"tr",1),ve(),Ut(2,pR,3,1,"div",2)),2&r&&(rt(1),St("ngForOf",i.blocks),rt(1),St("ngIf",i.placementError))},dependencies:[Dd,wd],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #585858;text-align:left;padding:8px;height:18px;width:18px;color:#fff}table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;padding:20px;text-align:center;margin:10px auto}.test[_ngcontent-%COMP%]{background-color:#bebebe!important}.firstMove[_ngcontent-%COMP%]{background-color:#d8d8d8!important}"]})}return e})();function mR(e,t){if(1&e&&Kn(0,"th"),2&e){const n=t.$implicit;ds("background-color",ke(2).Painter(n))}}function yR(e,t){if(1&e&&(ye(0,"tr"),Ut(1,mR,1,2,"th",6),ve()),2&e){const n=t.$implicit;rt(1),St("ngForOf",n)}}function vR(e,t){if(1&e){const n=wc();ye(0,"th",2),Qn("click",function(){Fi(n);const i=ke(3),s=i.$implicit,o=i.index;return Li(ke().select(s,o))}),ve()}if(2&e){const n=t.$implicit;ds("background-color",ke(4).Painter(n))}}function _R(e,t){if(1&e&&(ye(0,"tr"),Ut(1,vR,1,2,"th",9),ve()),2&e){const n=t.$implicit;rt(1),St("ngForOf",n)}}function DR(e,t){if(1&e&&(ye(0,"table",8),Ut(1,_R,2,1,"tr",4),ve()),2&e){const n=ke().$implicit;rt(1),St("ngForOf",n)}}function wR(e,t){if(1&e&&(ye(0,"li"),Ut(1,DR,2,1,"table",7),ve()),2&e){const n=t.index,r=ke();rt(1),St("ngIf",r.blockIndexes[n])}}let bR=(()=>{class e{Painter(n){if(0==n)return"white";switch(this.playernumber){case 1:return"Lightblue";case 2:return"pink";default:return"white"}}rotate(){let n=this.selectedBlock;const r=this.selectedBlock.length,i=this.selectedBlock[0].length;let s=[];for(let o=0;o<i;o++)s.push([]);for(let o=0;o<i;o++)for(let a=0;a<r;a++)s[o].unshift(n[a][o]);this.blockService.updateSelected(s)}mirror(){let n=[];for(let r=0;r<this.selectedBlock.length;r++)n.push(this.selectedBlock[r].reverse());this.blockService.updateSelected(n)}select(n,r){var i=this;return v(function*(){const s=JSON.parse(JSON.stringify(n));i.blockService.updateSelected(s),i.blockService.selectedIndex.next(r)})()}constructor(n,r,i){this.blockService=n,this.databaseService=r,this.appComponent=i,this.selectedBlock=[[0]],this.blockService.selected.subscribe(s=>this.selectedBlock=s),this.playernumber=0,this.blockService.playernumber.subscribe(s=>this.playernumber=s),this.blockIndexes=[],this.blockService.indexes.subscribe(s=>{this.blockIndexes=s}),this.appComponent.indexes.subscribe(s=>this.blockIndexes=s),console.log(this.blockIndexes),this.blocks=[[[1,1,1,1],[1,0,0,0]],[[1,1,1,1],[0,1,0,0]],[[1,1,1,0],[0,0,1,1]],[[1,1],[1,0]],[[1,1],[1,0],[1,1]],[[1,1,1],[1,0,0],[1,0,0]],[[1,1,0],[0,1,0],[0,1,1]],[[0,1,0],[1,1,1],[0,1,0]],[[1,1,1],[0,1,0],[0,1,0]],[[1,0,0],[1,1,0],[0,1,1]],[[1,1],[1,1],[1,0]],[[0,1,1],[1,1,0],[0,1,0]],[[1,1],[1,1]],[[1,1,1],[0,0,1]],[[1,1,1],[0,1,0]],[[1,1,0],[0,1,1]],[[1]],[[1],[1]],[[1],[1],[1]],[[1],[1],[1],[1]],[[1],[1],[1],[1],[1]]],this.possibleBlocks=[[[]]],this.blockService.possibleBlocks.subscribe(s=>this.possibleBlocks=s),this.blockService.possibleBlocks.next(this.blocks)}static#e=this.\u0275fac=function(r){return new(r||e)(M(Os),M(vi),M(af))};static#t=this.\u0275cmp=fr({type:e,selectors:[["app-user-blocks"]],decls:14,vars:2,consts:[[1,"selectedDiv"],[1,"selectedList"],[3,"click"],[1,"selected"],[4,"ngFor","ngForOf"],["id","menu"],[3,"backgroundColor",4,"ngFor","ngForOf"],["class","table",4,"ngIf"],[1,"table"],[3,"backgroundColor","click",4,"ngFor","ngForOf"]],template:function(r,i){1&r&&(ye(0,"div",0)(1,"ul",1)(2,"li",1)(3,"button",2),Qn("click",function(){return i.rotate()}),Yn(4,"rotate"),ve()(),ye(5,"li",1)(6,"button",2),Qn("click",function(){return i.mirror()}),Yn(7,"mirror"),ve()(),ye(8,"li",1)(9,"table",3),Ut(10,yR,2,1,"tr",4),ve()()()(),Kn(11,"br"),ye(12,"ul",5),Ut(13,wR,2,1,"li",4),ve()),2&r&&(rt(10),St("ngForOf",i.selectedBlock),rt(3),St("ngForOf",i.possibleBlocks))},dependencies:[Dd,wd],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:1px solid #ffffff;text-align:left;padding:2px;height:12px;width:12px;color:#fff}table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;padding:20px;text-align:center;margin-left:auto;margin-right:auto}ul[_ngcontent-%COMP%], li[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{display:inline}.selected[_ngcontent-%COMP%]{justify-content:center;align-items:center}.selectedDiv[_ngcontent-%COMP%]{height:80px}.selectedList[_ngcontent-%COMP%]{justify-content:center}"]})}return e})(),ER=(()=>{class e{constructor(n,r){this.databaseService=n,this.blockService=r,this.playernumber=0,this.blockService.playernumber.subscribe(i=>this.playernumber=i)}reset(){this.blockService.updateGrid(this.blockService.generateEmptyBoard()),this.blockService.reinitializePossibleBlocks(),this.blockService.reinitializeTurns()}static#e=this.\u0275fac=function(r){return new(r||e)(M(vi),M(Os))};static#t=this.\u0275cmp=fr({type:e,selectors:[["app-reset-button"]],decls:5,vars:1,consts:[[3,"click"]],template:function(r,i){1&r&&(ye(0,"div")(1,"button",0),Qn("click",function(){return i.reset()}),Yn(2,"New Game"),ve(),ye(3,"p"),Yn(4),ve()()),2&r&&(rt(4),aa(" player ",i.playernumber,""))},styles:["button[_ngcontent-%COMP%]{width:130px;margin:auto}div[_ngcontent-%COMP%]{width:100px;margin:auto;text-align:center}"]})}return e})();class sw{}class CR{}const gn="*";function ow(e,t=null){return{type:2,steps:e,options:t}}function aw(e){return{type:6,styles:e,offset:null}}class xs{constructor(t=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class lw{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let n=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const n=t*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){const t=this.players.reduce((n,r)=>null===n||r.totalTime>n.totalTime?r:n,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const n="start"==t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}function uw(e){return new w(3e3,!1)}function xn(e){switch(e.length){case 0:return new xs;case 1:return e[0];default:return new lw(e)}}function cw(e,t,n=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(t.forEach(l=>{const u=l.get("offset"),c=u==o,d=c&&a||new Map;l.forEach((f,h)=>{let p=h,g=f;if("offset"!==h)switch(p=e.normalizePropertyName(p,i),g){case"!":g=n.get(h);break;case gn:g=r.get(h);break;default:g=e.normalizeStyleValue(h,p,g,i)}d.set(p,g)}),c||s.push(d),a=d,o=u}),i.length)throw function WR(e){return new w(3502,!1)}();return s}function uf(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&cf(n,"start",e)));break;case"done":e.onDone(()=>r(n&&cf(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&cf(n,"destroy",e)))}}function cf(e,t,n){const s=df(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,n.totalTime??e.totalTime,!!n.disabled),o=e._data;return null!=o&&(s._data=o),s}function df(e,t,n,r,i="",s=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function ot(e,t,n){let r=e.get(t);return r||e.set(t,r=n),r}function dw(e){const t=e.indexOf(":");return[e.substring(1,t),e.slice(t+1)]}const sF=(()=>typeof document>"u"?null:document.documentElement)();function ff(e){const t=e.parentNode||e.host||null;return t===sF?null:t}let sr=null,fw=!1;function hw(e,t){for(;t;){if(t===e)return!0;t=ff(t)}return!1}function pw(e,t,n){if(n)return Array.from(e.querySelectorAll(t));const r=e.querySelector(t);return r?[r]:[]}let gw=(()=>{class e{validateStyleProperty(n){return function aF(e){sr||(sr=function lF(){return typeof document<"u"?document.body:null}()||{},fw=!!sr.style&&"WebkitAppearance"in sr.style);let t=!0;return sr.style&&!function oF(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in sr.style,!t&&fw&&(t="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in sr.style)),t}(n)}matchesElement(n,r){return!1}containsElement(n,r){return hw(n,r)}getParentElement(n){return ff(n)}query(n,r,i){return pw(n,r,i)}computeStyle(n,r,i){return i||""}animate(n,r,i,s,o,a=[],l){return new xs(i,s)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})(),hf=(()=>{class e{static#e=this.NOOP=new gw}return e})();const uF=1e3,pf="ng-enter",Va="ng-leave",Ha="ng-trigger",Ua=".ng-trigger",yw="ng-animating",gf=".ng-animating";function mn(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:mf(parseFloat(t[1]),t[2])}function mf(e,t){return"s"===t?e*uF:e}function za(e,t,n){return e.hasOwnProperty("duration")?e:function dF(e,t,n){let i,s=0,o="";if("string"==typeof e){const a=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(uw()),{duration:0,delay:0,easing:""};i=mf(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=mf(parseFloat(l),a[4]));const u=a[5];u&&(o=u)}else i=e;if(!n){let a=!1,l=t.length;i<0&&(t.push(function SR(){return new w(3100,!1)}()),a=!0),s<0&&(t.push(function IR(){return new w(3101,!1)}()),a=!0),a&&t.splice(l,0,uw())}return{duration:i,delay:s,easing:o}}(e,t,n)}function Rs(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function vw(e){const t=new Map;return Object.keys(e).forEach(n=>{t.set(n,e[n])}),t}function Rn(e,t=new Map,n){if(n)for(let[r,i]of n)t.set(r,i);for(let[r,i]of e)t.set(r,i);return t}function Kt(e,t,n){t.forEach((r,i)=>{const s=vf(i);n&&!n.has(i)&&n.set(i,e.style[s]),e.style[s]=r})}function or(e,t){t.forEach((n,r)=>{const i=vf(r);e.style[i]=""})}function Fs(e){return Array.isArray(e)?1==e.length?e[0]:ow(e):e}const yf=new RegExp("{{\\s*(.+?)\\s*}}","g");function Dw(e){let t=[];if("string"==typeof e){let n;for(;n=yf.exec(e);)t.push(n[1]);yf.lastIndex=0}return t}function Ls(e,t,n){const r=e.toString(),i=r.replace(yf,(s,o)=>{let a=t[o];return null==a&&(n.push(function MR(e){return new w(3003,!1)}()),a=""),a.toString()});return i==r?e:i}function qa(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const pF=/-+([a-z0-9])/g;function vf(e){return e.replace(pF,(...t)=>t[1].toUpperCase())}function at(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw function AR(e){return new w(3004,!1)}()}}function ww(e,t){return window.getComputedStyle(e)[t]}const Ga="*";function yF(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function vF(e,t,n){if(":"==e[0]){const l=function _F(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,r)=>parseFloat(r)>parseFloat(n);case":decrement":return(n,r)=>parseFloat(r)<parseFloat(n);default:return t.push(function UR(e){return new w(3016,!1)}()),"* => *"}}(e,n);if("function"==typeof l)return void t.push(l);e=l}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(function HR(e){return new w(3015,!1)}()),t;const i=r[1],s=r[2],o=r[3];t.push(bw(i,o));"<"==s[0]&&!(i==Ga&&o==Ga)&&t.push(bw(o,i))}(r,n,t)):n.push(e),n}const Wa=new Set(["true","1"]),Ka=new Set(["false","0"]);function bw(e,t){const n=Wa.has(e)||Ka.has(e),r=Wa.has(t)||Ka.has(t);return(i,s)=>{let o=e==Ga||e==i,a=t==Ga||t==s;return!o&&n&&"boolean"==typeof i&&(o=i?Wa.has(e):Ka.has(e)),!a&&r&&"boolean"==typeof s&&(a=s?Wa.has(t):Ka.has(t)),o&&a}}const DF=new RegExp("s*:selfs*,?","g");function _f(e,t,n,r){return new wF(e).build(t,n,r)}class wF{constructor(t){this._driver=t}build(t,n,r){const i=new CF(n);return this._resetContextStyleTimingState(i),at(this,Fs(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,n){let r=n.queryCount=0,i=n.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&n.errors.push(function PR(){return new w(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,s.push(this.visitState(l,n))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,n);r+=l.queryCount,i+=l.depCount,o.push(l)}else n.errors.push(function kR(){return new w(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(t,n){const r=this.visitStyle(t.styles,n),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Dw(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(qa(s.values()),n.errors.push(function OR(e,t){return new w(3008,!1)}()))}return{type:0,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,n){n.queryCount=0,n.depCount=0;const r=at(this,Fs(t.animation),n);return{type:1,matchers:yF(t.expr,n.errors),animation:r,queryCount:n.queryCount,depCount:n.depCount,options:ar(t.options)}}visitSequence(t,n){return{type:2,steps:t.steps.map(r=>at(this,r,n)),options:ar(t.options)}}visitGroup(t,n){const r=n.currentTime;let i=0;const s=t.steps.map(o=>{n.currentTime=r;const a=at(this,o,n);return i=Math.max(i,n.currentTime),a});return n.currentTime=i,{type:3,steps:s,options:ar(t.options)}}visitAnimate(t,n){const r=function IF(e,t){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return Df(za(e,t).duration,0,"");const n=e;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Df(0,0,"");return s.dynamic=!0,s.strValue=n,s}const i=za(n,t);return Df(i.duration,i.delay,i.easing)}(t.timings,n.errors);n.currentAnimateTimings=r;let i,s=t.styles?t.styles:aw({});if(5==s.type)i=this.visitKeyframes(s,n);else{let o=t.styles,a=!1;if(!o){a=!0;const u={};r.easing&&(u.easing=r.easing),o=aw(u)}n.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,n);l.isEmptyStep=a,i=l}return n.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(t,n){const r=this._makeStyleAst(t,n);return this._validateStyleAst(r,n),r}_makeStyleAst(t,n){const r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)"string"==typeof a?a===gn?r.push(a):n.errors.push(new w(3002,!1)):r.push(vw(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,n){const r=n.currentAnimateTimings;let i=n.currentTime,s=n.currentTime;r&&s>0&&(s-=r.duration+r.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const u=n.collectedStyles.get(n.currentQuerySelector),c=u.get(l);let d=!0;c&&(s!=i&&s>=c.startTime&&i<=c.endTime&&(n.errors.push(function RR(e,t,n,r,i){return new w(3010,!1)}()),d=!1),s=c.startTime),d&&u.set(l,{startTime:s,endTime:i}),n.options&&function hF(e,t,n){const r=t.params||{},i=Dw(e);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||n.push(function TR(e){return new w(3001,!1)}())})}(a,n.options,n.errors)})})}visitKeyframes(t,n){const r={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function FR(){return new w(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,u=0;const c=t.steps.map(_=>{const y=this._makeStyleAst(_,n);let b=null!=y.offset?y.offset:function SF(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(n=>{if(n instanceof Map&&n.has("offset")){const r=n;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}return t}(y.styles),E=0;return null!=b&&(s++,E=y.offset=b),l=l||E<0||E>1,a=a||E<u,u=E,o.push(E),y});l&&n.errors.push(function LR(){return new w(3012,!1)}()),a&&n.errors.push(function jR(){return new w(3200,!1)}());const d=t.steps.length;let f=0;s>0&&s<d?n.errors.push(function $R(){return new w(3202,!1)}()):0==s&&(f=1/(d-1));const h=d-1,p=n.currentTime,g=n.currentAnimateTimings,m=g.duration;return c.forEach((_,y)=>{const b=f>0?y==h?1:f*y:o[y],E=b*m;n.currentTime=p+g.delay+E,g.duration=E,this._validateStyleAst(_,n),_.offset=b,r.styles.push(_)}),r}visitReference(t,n){return{type:8,animation:at(this,Fs(t.animation),n),options:ar(t.options)}}visitAnimateChild(t,n){return n.depCount++,{type:9,options:ar(t.options)}}visitAnimateRef(t,n){return{type:10,animation:this.visitReference(t.animation,n),options:ar(t.options)}}visitQuery(t,n){const r=n.currentQuerySelector,i=t.options||{};n.queryCount++,n.currentQuery=t;const[s,o]=function bF(e){const t=!!e.split(/\s*,\s*/).find(n=>":self"==n);return t&&(e=e.replace(DF,"")),e=e.replace(/@\*/g,Ua).replace(/@\w+/g,n=>Ua+"-"+n.slice(1)).replace(/:animating/g,gf),[e,t]}(t.selector);n.currentQuerySelector=r.length?r+" "+s:s,ot(n.collectedStyles,n.currentQuerySelector,new Map);const a=at(this,Fs(t.animation),n);return n.currentQuery=null,n.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:ar(t.options)}}visitStagger(t,n){n.currentQuery||n.errors.push(function BR(){return new w(3013,!1)}());const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:za(t.timings,n.errors,!0);return{type:12,animation:at(this,Fs(t.animation),n),timings:r,options:null}}}class CF{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ar(e){return e?(e=Rs(e)).params&&(e.params=function EF(e){return e?Rs(e):null}(e.params)):e={},e}function Df(e,t,n){return{duration:e,delay:t,easing:n}}function wf(e,t,n,r,i,s,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Qa{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,n){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...n)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const AF=new RegExp(":enter","g"),PF=new RegExp(":leave","g");function bf(e,t,n,r,i,s=new Map,o=new Map,a,l,u=[]){return(new kF).buildKeyframes(e,t,n,r,i,s,o,a,l,u)}class kF{buildKeyframes(t,n,r,i,s,o,a,l,u,c=[]){u=u||new Qa;const d=new Ef(t,n,u,i,s,c,[]);d.options=l;const f=l.delay?mn(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),at(this,r,d);const h=d.timelines.filter(p=>p.containsAnimation());if(h.length&&a.size){let p;for(let g=h.length-1;g>=0;g--){const m=h[g];if(m.element===n){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return h.length?h.map(p=>p.buildKeyframes()):[wf(n,[],[],[],0,f,"",!1)]}visitTrigger(t,n){}visitState(t,n){}visitTransition(t,n){}visitAnimateChild(t,n){const r=n.subInstructions.get(n.element);if(r){const i=n.createSubContext(t.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=t}visitAnimateRef(t,n){const r=n.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],n,r),this.visitReference(t.animation,r),n.transformIntoNewTimeline(r.currentTimeline.currentTime),n.previousNode=t}_applyAnimationRefDelays(t,n,r){for(const i of t){const s=i?.delay;if(s){const o="number"==typeof s?s:mn(Ls(s,i?.params??{},n.errors));r.delayNextStep(o)}}}_visitSubInstructions(t,n,r){let s=n.currentTimeline.currentTime;const o=null!=r.duration?mn(r.duration):null,a=null!=r.delay?mn(r.delay):null;return 0!==o&&t.forEach(l=>{const u=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(t,n){n.updateOptions(t.options,!0),at(this,t.animation,n),n.previousNode=t}visitSequence(t,n){const r=n.subContextCount;let i=n;const s=t.options;if(s&&(s.params||s.delay)&&(i=n.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Za);const o=mn(s.delay);i.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>at(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),n.previousNode=t}visitGroup(t,n){const r=[];let i=n.currentTimeline.currentTime;const s=t.options&&t.options.delay?mn(t.options.delay):0;t.steps.forEach(o=>{const a=n.createSubContext(t.options);s&&a.delayNextStep(s),at(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(i),n.previousNode=t}_visitTiming(t,n){if(t.dynamic){const r=t.strValue;return za(n.params?Ls(r,n.params,n.errors):r,n.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,n){const r=n.currentAnimateTimings=this._visitTiming(t.timings,n),i=n.currentTimeline;r.delay&&(n.incrementTime(r.delay),i.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(r.duration),this.visitStyle(s,n),i.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=t}visitStyle(t,n){const r=n.currentTimeline,i=n.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(s):r.setStyles(t.styles,s,n.errors,n.options),n.previousNode=t}visitKeyframes(t,n){const r=n.currentAnimateTimings,i=n.currentTimeline.duration,s=r.duration,a=n.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(i+s),n.previousNode=t}visitQuery(t,n){const r=n.currentTimeline.currentTime,i=t.options||{},s=i.delay?mn(i.delay):0;s&&(6===n.previousNode.type||0==r&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Za);let o=r;const a=n.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{n.currentQueryIndex=c;const d=n.createSubContext(t.options,u);s&&d.delayNextStep(s),u===n.element&&(l=d.currentTimeline),at(this,t.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=t}visitStagger(t,n){const r=n.parentContext,i=n.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1);let l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const c=n.currentTimeline;l&&c.delayNextStep(l);const d=c.currentTime;at(this,t.animation,n),n.previousNode=t,r.currentStaggerTime=i.currentTime-d+(i.startTime-r.currentTimeline.startTime)}}const Za={};class Ef{constructor(t,n,r,i,s,o,a,l){this._driver=t,this.element=n,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Za,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Ya(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,n){if(!t)return;const r=t;let i=this.options;null!=r.duration&&(i.duration=mn(r.duration)),null!=r.delay&&(i.delay=mn(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=Ls(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const n=this.options.params;if(n){const r=t.params={};Object.keys(n).forEach(i=>{r[i]=n[i]})}}return t}createSubContext(t=null,n,r){const i=n||this.element,s=new Ef(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Za,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,n,r){const i={duration:n??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},s=new OF(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,n,r,i,s,o){let a=[];if(i&&a.push(this.element),t.length>0){t=(t=t.replace(AF,"."+this._enterClassName)).replace(PF,"."+this._leaveClassName);let u=this._driver.query(this.element,t,1!=r);0!==r&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!s&&0==a.length&&o.push(function VR(e){return new w(3014,!1)}()),a}}class Ya{constructor(t,n,r,i){this._driver=t,this.element=n,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+t),n&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,n){return this.applyStylesToKeyframe(),new Ya(this._driver,t,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,n){this._localTimelineStyles.set(t,n),this._globalTimelineStyles.set(t,n),this._styleSummary.set(t,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[n,r]of this._globalTimelineStyles)this._backFill.set(n,r||gn),this._currentKeyframe.set(n,gn);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,n,r,i){n&&this._previousKeyframe.set("easing",n);const s=i&&i.params||{},o=function xF(e,t){const n=new Map;let r;return e.forEach(i=>{if("*"===i){r=r||t.keys();for(let s of r)n.set(s,gn)}else Rn(i,n)}),n}(t,this._globalTimelineStyles);for(let[a,l]of o){const u=Ls(l,s,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??gn),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,n)=>{this._currentKeyframe.set(n,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,t)}))}snapshotCurrentStyles(){for(let[t,n]of this._localTimelineStyles)this._pendingStyles.set(t,n),this._updateStyle(t,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let n in this._currentKeyframe)t.push(n);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((n,r)=>{const i=this._styleSummary.get(r);(!i||n.time>i.time)&&this._updateStyle(r,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,n=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const u=Rn(a,new Map,this._backFill);u.forEach((c,d)=>{"!"===c?t.add(d):c===gn&&n.add(d)}),r||u.set("offset",l/this.duration),i.push(u)});const s=t.size?qa(t.values()):[],o=n.size?qa(n.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return wf(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class OF extends Ya{constructor(t,n,r,i,s,o,a=!1){super(t,n,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:n,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=r+n,a=n/o,l=Rn(t[0]);l.set("offset",0),s.push(l);const u=Rn(t[0]);u.set("offset",Sw(a)),s.push(u);const c=t.length-1;for(let d=1;d<=c;d++){let f=Rn(t[d]);const h=f.get("offset");f.set("offset",Sw((n+h*r)/o)),s.push(f)}r=o,n=0,i="",t=s}return wf(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)}}function Sw(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class Cf{}const RF=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class FF extends Cf{normalizePropertyName(t,n){return vf(t)}normalizeStyleValue(t,n,r,i){let s="";const o=r.toString().trim();if(RF.has(n)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function NR(e,t){return new w(3005,!1)}())}return o+s}}function Iw(e,t,n,r,i,s,o,a,l,u,c,d,f){return{type:0,element:e,triggerName:t,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:d,errors:f}}const Sf={};class Tw{constructor(t,n,r){this._triggerName=t,this.ast=n,this._stateStyles=r}match(t,n,r,i){return function LF(e,t,n,r,i){return e.some(s=>s(t,n,r,i))}(this.ast.matchers,t,n,r,i)}buildStyles(t,n,r){let i=this._stateStyles.get("*");return void 0!==t&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(n,r):new Map}build(t,n,r,i,s,o,a,l,u,c){const d=[],f=this.ast.options&&this.ast.options.params||Sf,p=this.buildStyles(r,a&&a.params||Sf,d),g=l&&l.params||Sf,m=this.buildStyles(i,g,d),_=new Set,y=new Map,b=new Map,E="void"===i,T={params:jF(g,f),delay:this.ast.options?.delay},J=c?[]:bf(t,n,this.ast.animation,s,o,p,m,T,u,d);let oe=0;if(J.forEach(lt=>{oe=Math.max(lt.duration+lt.delay,oe)}),d.length)return Iw(n,this._triggerName,r,i,E,p,m,[],[],y,b,oe,d);J.forEach(lt=>{const kt=lt.element,tl=ot(y,kt,new Set);lt.preStyleProps.forEach(lr=>tl.add(lr));const $s=ot(b,kt,new Set);lt.postStyleProps.forEach(lr=>$s.add(lr)),kt!==n&&_.add(kt)});const xe=qa(_.values());return Iw(n,this._triggerName,r,i,E,p,m,J,xe,y,b,oe)}}function jF(e,t){const n=Rs(t);for(const r in e)e.hasOwnProperty(r)&&null!=e[r]&&(n[r]=e[r]);return n}class $F{constructor(t,n,r){this.styles=t,this.defaultParams=n,this.normalizer=r}buildStyles(t,n){const r=new Map,i=Rs(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Ls(o,i,n));const l=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,l,o,n),r.set(a,o)})}),r}}class VF{constructor(t,n,r){this.name=t,this.ast=n,this._normalizer=r,this.transitionFactories=[],this.states=new Map,n.states.forEach(i=>{this.states.set(i.name,new $F(i.style,i.options&&i.options.params||{},r))}),Mw(this.states,"true","1"),Mw(this.states,"false","0"),n.transitions.forEach(i=>{this.transitionFactories.push(new Tw(t,i,this.states))}),this.fallbackTransition=function HF(e,t,n){return new Tw(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,n,r,i){return this.transitionFactories.find(o=>o.match(t,n,r,i))||null}matchStyles(t,n,r){return this.fallbackTransition.buildStyles(t,n,r)}}function Mw(e,t,n){e.has(t)?e.has(n)||e.set(n,e.get(t)):e.has(n)&&e.set(t,e.get(n))}const UF=new Qa;class zF{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,n){const r=[],s=_f(this._driver,n,r,[]);if(r.length)throw function KR(e){return new w(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,n,r){const i=t.element,s=cw(this._normalizer,t.keyframes,n,r);return this._driver.animate(i,s,t.duration,t.delay,t.easing,[],!0)}create(t,n,r={}){const i=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=bf(this._driver,n,s,pf,Va,new Map,new Map,r,UF,i),o.forEach(c=>{const d=ot(a,c.element,new Map);c.postStyleProps.forEach(f=>d.set(f,null))})):(i.push(function QR(){return new w(3300,!1)}()),o=[]),i.length)throw function ZR(e){return new w(3504,!1)}();a.forEach((c,d)=>{c.forEach((f,h)=>{c.set(h,this._driver.computeStyle(d,h,gn))})});const u=xn(o.map(c=>{const d=a.get(c.element);return this._buildPlayer(c,new Map,d)}));return this._playersById.set(t,u),u.onDestroy(()=>this.destroy(t)),this.players.push(u),u}destroy(t){const n=this._getPlayer(t);n.destroy(),this._playersById.delete(t);const r=this.players.indexOf(n);r>=0&&this.players.splice(r,1)}_getPlayer(t){const n=this._playersById.get(t);if(!n)throw function YR(e){return new w(3301,!1)}();return n}listen(t,n,r,i){const s=df(n,"","","");return uf(this._getPlayer(t),r,s,i),()=>{}}command(t,n,r,i){if("register"==r)return void this.register(t,i[0]);if("create"==r)return void this.create(t,n,i[0]||{});const s=this._getPlayer(t);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const Aw="ng-animate-queued",If="ng-animate-disabled",QF=[],Nw={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ZF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Pt="__ng_removed";class Tf{get params(){return this.options.params}constructor(t,n=""){this.namespaceId=n;const r=t&&t.hasOwnProperty("value");if(this.value=function eL(e){return e??null}(r?t.value:t),r){const s=Rs(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const n=t.params;if(n){const r=this.options.params;Object.keys(n).forEach(i=>{null==r[i]&&(r[i]=n[i])})}}}const js="void",Mf=new Tf(js);class YF{constructor(t,n,r){this.id=t,this.hostElement=n,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Dt(n,this._hostClassName)}listen(t,n,r,i){if(!this._triggers.has(n))throw function JR(e,t){return new w(3302,!1)}();if(null==r||0==r.length)throw function XR(e){return new w(3303,!1)}();if(!function tL(e){return"start"==e||"done"==e}(r))throw function eF(e,t){return new w(3400,!1)}();const s=ot(this._elementListeners,t,[]),o={name:n,phase:r,callback:i};s.push(o);const a=ot(this._engine.statesByElement,t,new Map);return a.has(n)||(Dt(t,Ha),Dt(t,Ha+"-"+n),a.set(n,Mf)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(t,n){return!this._triggers.has(t)&&(this._triggers.set(t,n),!0)}_getTrigger(t){const n=this._triggers.get(t);if(!n)throw function tF(e){return new w(3401,!1)}();return n}trigger(t,n,r,i=!0){const s=this._getTrigger(n),o=new Af(this.id,n,t);let a=this._engine.statesByElement.get(t);a||(Dt(t,Ha),Dt(t,Ha+"-"+n),this._engine.statesByElement.set(t,a=new Map));let l=a.get(n);const u=new Tf(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(n,u),l||(l=Mf),u.value!==js&&l.value===u.value){if(!function iL(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const s=n[i];if(!t.hasOwnProperty(s)||e[s]!==t[s])return!1}return!0}(l.params,u.params)){const g=[],m=s.matchStyles(l.value,l.params,g),_=s.matchStyles(u.value,u.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{or(t,m),Kt(t,_)})}return}const f=ot(this._engine.playersByElement,t,[]);f.forEach(g=>{g.namespaceId==this.id&&g.triggerName==n&&g.queued&&g.destroy()});let h=s.matchTransition(l.value,u.value,t,u.params),p=!1;if(!h){if(!i)return;h=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:n,transition:h,fromState:l,toState:u,player:o,isFallbackTransition:p}),p||(Dt(t,Aw),o.onStart(()=>{_i(t,Aw)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(t);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),f.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(n=>n.delete(t)),this._elementListeners.forEach((n,r)=>{this._elementListeners.set(r,n.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const n=this._engine.playersByElement.get(t);n&&(n.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,n){const r=this._engine.driver.query(t,Ua,!0);r.forEach(i=>{if(i[Pt])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,n,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,n,r,i){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){const c=this.trigger(t,u,js,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,n,o),r&&xn(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const n=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(n&&r){const i=new Set;n.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,u=r.get(o)||Mf,c=new Tf(js),d=new Af(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:u,toState:c,player:d,isFallbackTransition:!0})})}}removeNode(t,n){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,n),this.triggerLeaveAnimation(t,n,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else{let o=t;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,n);else{const s=t[Pt];(!s||s===Nw)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,n))}}insertNode(t,n){Dt(t,this._hostClassName)}drainQueuedTransitions(t){const n=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=df(s,r.triggerName,r.fromState.value,r.toState.value);l._data=t,uf(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):n.push(r)}),this._queue=[],n.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class JF{_onRemovalComplete(t,n){this.onRemovalComplete(t,n)}constructor(t,n,r){this.bodyNode=t,this.driver=n,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(n=>{n.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,n){const r=new YF(t,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(r,n):(this.newHostElements.set(n,r),this.collectEnterElement(n)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,n){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){const l=i.get(a);if(l){const u=r.indexOf(l);r.splice(u+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(t)}else r.push(t);return i.set(n,t),t}register(t,n){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,n)),r}registerTrigger(t,n,r){let i=this._namespaceLookup[t];i&&i.register(n,r)&&this.totalAnimations++}destroy(t,n){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(n),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const n=new Set,r=this.statesByElement.get(t);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&n.add(s)}return n}trigger(t,n,r,i){if(Ja(n)){const s=this._fetchNamespace(t);if(s)return s.trigger(n,r,i),!0}return!1}insertNode(t,n,r,i){if(!Ja(n))return;const s=n[Pt];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(n,r)}i&&this.collectEnterElement(n)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,n){n?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Dt(t,If)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),_i(t,If))}removeNode(t,n,r){if(Ja(n)){const i=t?this._fetchNamespace(t):null;i?i.removeNode(n,r):this.markElementAsRemoved(t,n,!1,r);const s=this.namespacesByHostElement.get(n);s&&s.id!==t&&s.removeNode(n,r)}else this._onRemovalComplete(n,r)}markElementAsRemoved(t,n,r,i,s){this.collectedLeaveElements.push(n),n[Pt]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,n,r,i,s){return Ja(n)?this._fetchNamespace(t).listen(n,r,i,s):()=>{}}_buildInstruction(t,n,r,i,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,n,s)}destroyInnerAnimations(t){let n=this.driver.query(t,Ua,!0);n.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,gf,!0),n.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const n=this.playersByElement.get(t);n&&n.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const n=this.playersByQueriedElement.get(t);n&&n.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return xn(this.players).onDone(()=>t());t()})}processLeaveNode(t){const n=t[Pt];if(n&&n.setForRemoval){if(t[Pt]=Nw,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}t.classList?.contains(If)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Dt(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{n=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],n.length?xn(n).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw function nF(e){return new w(3402,!1)}()}_flushAnimations(t,n){const r=new Qa,i=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(S=>{c.add(S);const I=this.driver.query(S,".ng-animate-queued",!0);for(let A=0;A<I.length;A++)c.add(I[A])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),h=Ow(f,this.collectedEnterElements),p=new Map;let g=0;h.forEach((S,I)=>{const A=pf+g++;p.set(I,A),S.forEach(G=>Dt(G,A))});const m=[],_=new Set,y=new Set;for(let S=0;S<this.collectedLeaveElements.length;S++){const I=this.collectedLeaveElements[S],A=I[Pt];A&&A.setForRemoval&&(m.push(I),_.add(I),A.hasAnimation?this.driver.query(I,".ng-star-inserted",!0).forEach(G=>_.add(G)):y.add(I))}const b=new Map,E=Ow(f,Array.from(_));E.forEach((S,I)=>{const A=Va+g++;b.set(I,A),S.forEach(G=>Dt(G,A))}),t.push(()=>{h.forEach((S,I)=>{const A=p.get(I);S.forEach(G=>_i(G,A))}),E.forEach((S,I)=>{const A=b.get(I);S.forEach(G=>_i(G,A))}),m.forEach(S=>{this.processLeaveNode(S)})});const T=[],J=[];for(let S=this._namespaceList.length-1;S>=0;S--)this._namespaceList[S].drainQueuedTransitions(n).forEach(A=>{const G=A.player,Ce=A.element;if(T.push(G),this.collectedEnterElements.length){const Re=Ce[Pt];if(Re&&Re.setForMove){if(Re.previousTriggersValues&&Re.previousTriggersValues.has(A.triggerName)){const ur=Re.previousTriggersValues.get(A.triggerName),wt=this.statesByElement.get(A.element);if(wt&&wt.has(A.triggerName)){const nl=wt.get(A.triggerName);nl.value=ur,wt.set(A.triggerName,nl)}}return void G.destroy()}}const Qt=!d||!this.driver.containsElement(d,Ce),ut=b.get(Ce),Fn=p.get(Ce),de=this._buildInstruction(A,r,Fn,ut,Qt);if(de.errors&&de.errors.length)return void J.push(de);if(Qt)return G.onStart(()=>or(Ce,de.fromStyles)),G.onDestroy(()=>Kt(Ce,de.toStyles)),void i.push(G);if(A.isFallbackTransition)return G.onStart(()=>or(Ce,de.fromStyles)),G.onDestroy(()=>Kt(Ce,de.toStyles)),void i.push(G);const zw=[];de.timelines.forEach(Re=>{Re.stretchStartingKeyframe=!0,this.disabledNodes.has(Re.element)||zw.push(Re)}),de.timelines=zw,r.append(Ce,de.timelines),o.push({instruction:de,player:G,element:Ce}),de.queriedElements.forEach(Re=>ot(a,Re,[]).push(G)),de.preStyleProps.forEach((Re,ur)=>{if(Re.size){let wt=l.get(ur);wt||l.set(ur,wt=new Set),Re.forEach((nl,kf)=>wt.add(kf))}}),de.postStyleProps.forEach((Re,ur)=>{let wt=u.get(ur);wt||u.set(ur,wt=new Set),Re.forEach((nl,kf)=>wt.add(kf))})});if(J.length){const S=[];J.forEach(I=>{S.push(function rF(e,t){return new w(3505,!1)}())}),T.forEach(I=>I.destroy()),this.reportError(S)}const oe=new Map,xe=new Map;o.forEach(S=>{const I=S.element;r.has(I)&&(xe.set(I,I),this._beforeAnimationBuild(S.player.namespaceId,S.instruction,oe))}),i.forEach(S=>{const I=S.element;this._getPreviousPlayers(I,!1,S.namespaceId,S.triggerName,null).forEach(G=>{ot(oe,I,[]).push(G),G.destroy()})});const lt=m.filter(S=>Rw(S,l,u)),kt=new Map;kw(kt,this.driver,y,u,gn).forEach(S=>{Rw(S,l,u)&&lt.push(S)});const $s=new Map;h.forEach((S,I)=>{kw($s,this.driver,new Set(S),l,"!")}),lt.forEach(S=>{const I=kt.get(S),A=$s.get(S);kt.set(S,new Map([...I?.entries()??[],...A?.entries()??[]]))});const lr=[],Hw=[],Uw={};o.forEach(S=>{const{element:I,player:A,instruction:G}=S;if(r.has(I)){if(c.has(I))return A.onDestroy(()=>Kt(I,G.toStyles)),A.disabled=!0,A.overrideTotalTime(G.totalTime),void i.push(A);let Ce=Uw;if(xe.size>1){let ut=I;const Fn=[];for(;ut=ut.parentNode;){const de=xe.get(ut);if(de){Ce=de;break}Fn.push(ut)}Fn.forEach(de=>xe.set(de,Ce))}const Qt=this._buildAnimation(A.namespaceId,G,oe,s,$s,kt);if(A.setRealPlayer(Qt),Ce===Uw)lr.push(A);else{const ut=this.playersByElement.get(Ce);ut&&ut.length&&(A.parentPlayer=xn(ut)),i.push(A)}}else or(I,G.fromStyles),A.onDestroy(()=>Kt(I,G.toStyles)),Hw.push(A),c.has(I)&&i.push(A)}),Hw.forEach(S=>{const I=s.get(S.element);if(I&&I.length){const A=xn(I);S.setRealPlayer(A)}}),i.forEach(S=>{S.parentPlayer?S.syncPlayerEvents(S.parentPlayer):S.destroy()});for(let S=0;S<m.length;S++){const I=m[S],A=I[Pt];if(_i(I,Va),A&&A.hasAnimation)continue;let G=[];if(a.size){let Qt=a.get(I);Qt&&Qt.length&&G.push(...Qt);let ut=this.driver.query(I,gf,!0);for(let Fn=0;Fn<ut.length;Fn++){let de=a.get(ut[Fn]);de&&de.length&&G.push(...de)}}const Ce=G.filter(Qt=>!Qt.destroyed);Ce.length?nL(this,I,Ce):this.processLeaveNode(I)}return m.length=0,lr.forEach(S=>{this.players.push(S),S.onDone(()=>{S.destroy();const I=this.players.indexOf(S);this.players.splice(I,1)}),S.play()}),lr}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,n,r,i,s){let o=[];if(n){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==js;a.forEach(u=>{u.queued||!l&&u.triggerName!=i||o.push(u)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(t,n,r){const s=n.element,o=n.isRemovalTransition?void 0:t,a=n.isRemovalTransition?void 0:n.triggerName;for(const l of n.timelines){const u=l.element,c=u!==s,d=ot(r,u,[]);this._getPreviousPlayers(u,c,o,a,n.toState).forEach(h=>{const p=h.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),h.destroy(),d.push(h)})}or(s,n.fromStyles)}_buildAnimation(t,n,r,i,s,o){const a=n.triggerName,l=n.element,u=[],c=new Set,d=new Set,f=n.timelines.map(p=>{const g=p.element;c.add(g);const m=g[Pt];if(m&&m.removedBeforeQueried)return new xs(p.duration,p.delay);const _=g!==l,y=function rL(e){const t=[];return xw(e,t),t}((r.get(g)||QF).map(oe=>oe.getRealPlayer())).filter(oe=>!!oe.element&&oe.element===g),b=s.get(g),E=o.get(g),T=cw(this._normalizer,p.keyframes,b,E),J=this._buildPlayer(p,T,y);if(p.subTimeline&&i&&d.add(g),_){const oe=new Af(t,a,g);oe.setRealPlayer(J),u.push(oe)}return J});u.forEach(p=>{ot(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function XF(e,t,n){let r=e.get(t);if(r){if(r.length){const i=r.indexOf(n);r.splice(i,1)}0==r.length&&e.delete(t)}return r}(this.playersByQueriedElement,p.element,p))}),c.forEach(p=>Dt(p,yw));const h=xn(f);return h.onDestroy(()=>{c.forEach(p=>_i(p,yw)),Kt(l,n.toStyles)}),d.forEach(p=>{ot(i,p,[]).push(h)}),h}_buildPlayer(t,n,r){return n.length>0?this.driver.animate(t.element,n,t.duration,t.delay,t.easing,r):new xs(t.duration,t.delay)}}class Af{constructor(t,n,r){this.namespaceId=t,this.triggerName=n,this.element=r,this._player=new xs,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((n,r)=>{n.forEach(i=>uf(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const n=this._player;n.triggerCallback&&t.onStart(()=>n.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,n){ot(this._queuedCallbacks,t,[]).push(n)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const n=this._player;n.triggerCallback&&n.triggerCallback(t)}}function Ja(e){return e&&1===e.nodeType}function Pw(e,t){const n=e.style.display;return e.style.display=t??"none",n}function kw(e,t,n,r,i){const s=[];n.forEach(l=>s.push(Pw(l)));const o=[];r.forEach((l,u)=>{const c=new Map;l.forEach(d=>{const f=t.computeStyle(u,d,i);c.set(d,f),(!f||0==f.length)&&(u[Pt]=ZF,o.push(u))}),e.set(u,c)});let a=0;return n.forEach(l=>Pw(l,s[a++])),o}function Ow(e,t){const n=new Map;if(e.forEach(a=>n.set(a,[])),0==t.length)return n;const i=new Set(t),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const u=a.parentNode;return l=n.has(u)?u:i.has(u)?1:o(u),s.set(a,l),l}return t.forEach(a=>{const l=o(a);1!==l&&n.get(l).push(a)}),n}function Dt(e,t){e.classList?.add(t)}function _i(e,t){e.classList?.remove(t)}function nL(e,t,n){xn(n).onDone(()=>e.processLeaveNode(t))}function xw(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof lw?xw(r.players,t):t.push(r)}}function Rw(e,t,n){const r=n.get(e);if(!r)return!1;let i=t.get(e);return i?r.forEach(s=>i.add(s)):t.set(e,r),n.delete(e),!0}class Xa{constructor(t,n,r){this.bodyNode=t,this._driver=n,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new JF(t,n,r),this._timelineEngine=new zF(t,n,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(t,n,r,i,s){const o=t+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],c=_f(this._driver,s,l,[]);if(l.length)throw function GR(e,t){return new w(3404,!1)}();a=function BF(e,t,n){return new VF(e,t,n)}(i,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,i,a)}register(t,n){this._transitionEngine.register(t,n)}destroy(t,n){this._transitionEngine.destroy(t,n)}onInsert(t,n,r,i){this._transitionEngine.insertNode(t,n,r,i)}onRemove(t,n,r){this._transitionEngine.removeNode(t,n,r)}disableAnimations(t,n){this._transitionEngine.markElementAsDisabled(t,n)}process(t,n,r,i){if("@"==r.charAt(0)){const[s,o]=dw(r);this._timelineEngine.command(s,n,o,i)}else this._transitionEngine.trigger(t,n,r,i)}listen(t,n,r,i,s){if("@"==r.charAt(0)){const[o,a]=dw(r);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(t,n,r,i,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let oL=(()=>{class e{static#e=this.initialStylesByElement=new WeakMap;constructor(n,r,i){this._element=n,this._startStyles=r,this._endStyles=i,this._state=0;let s=e.initialStylesByElement.get(n);s||e.initialStylesByElement.set(n,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Kt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Kt(this._element,this._initialStyles),this._endStyles&&(Kt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(or(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(or(this._element,this._endStyles),this._endStyles=null),Kt(this._element,this._initialStyles),this._state=3)}}return e})();function Nf(e){let t=null;return e.forEach((n,r)=>{(function aL(e){return"display"===e||"position"===e})(r)&&(t=t||new Map,t.set(r,n))}),t}class Fw{constructor(t,n,r,i){this.element=t,this.keyframes=n,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const n=[];return t.forEach(r=>{n.push(Object.fromEntries(r))}),n}_triggerWebAnimation(t,n,r){return t.animate(this._convertKeyframesToObject(n),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&t.set(i,this._finished?r:ww(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){const n="start"===t?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}}class lL{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,n){return!1}containsElement(t,n){return hw(t,n)}getParentElement(t){return ff(t)}query(t,n,r){return pw(t,n,r)}computeStyle(t,n,r){return window.getComputedStyle(t)[n]}animate(t,n,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const u=new Map,c=o.filter(h=>h instanceof Fw);(function gF(e,t){return 0===e||0===t})(r,i)&&c.forEach(h=>{h.currentSnapshot.forEach((p,g)=>u.set(g,p))});let d=function fF(e){return e.length?e[0]instanceof Map?e:e.map(t=>vw(t)):[]}(n).map(h=>Rn(h));d=function mF(e,t,n){if(n.size&&t.length){let r=t[0],i=[];if(n.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<t.length;s++){let o=t[s];i.forEach(a=>o.set(a,ww(e,a)))}}return t}(t,d,u);const f=function sL(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=Nf(t[0]),t.length>1&&(r=Nf(t[t.length-1]))):t instanceof Map&&(n=Nf(t)),n||r?new oL(e,n,r):null}(t,d);return new Fw(t,d,l,f)}}let uL=(()=>{class e extends sw{constructor(n,r){super(),this._nextAnimationId=0,this._renderer=n.createRenderer(r.body,{id:"0",encapsulation:dt.None,styles:[],data:{animation:[]}})}build(n){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(n)?ow(n):n;return Lw(this._renderer,null,r,"register",[i]),new cL(r,this._renderer)}static#e=this.\u0275fac=function(r){return new(r||e)(F(ts),F(fn))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();class cL extends CR{constructor(t,n){super(),this._id=t,this._renderer=n}create(t,n){return new dL(this._id,t,n||{},this._renderer)}}class dL{constructor(t,n,r,i){this.id=t,this.element=n,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,n){return this._renderer.listen(this.element,`@@${this.id}:${t}`,n)}_command(t,...n){return Lw(this._renderer,this.element,this.id,t,n)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Lw(e,t,n,r,i){return e.setProperty(t,`@@${n}:${r}`,i)}const jw="@.disabled";let fL=(()=>{class e{constructor(n,r,i){this.delegate=n,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(n,r){const s=this.delegate.createRenderer(n,r);if(!(n&&r&&r.data&&r.data.animation)){let c=this._rendererCache.get(s);return c||(c=new $w("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,c)),c}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,n);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(o,a,n,c.name,c)};return r.data.animation.forEach(l),new hL(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,r,i){n>=0&&n<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(r){return new(r||e)(F(ts),F(Xa),F(le))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})();class $w{constructor(t,n,r,i){this.namespaceId=t,this.delegate=n,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,n){this.delegate.appendChild(t,n),this.engine.onInsert(this.namespaceId,n,t,!1)}insertBefore(t,n,r,i=!0){this.delegate.insertBefore(t,n,r),this.engine.onInsert(this.namespaceId,n,t,i)}removeChild(t,n,r){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,r,i){this.delegate.setAttribute(t,n,r,i)}removeAttribute(t,n,r){this.delegate.removeAttribute(t,n,r)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,r,i){this.delegate.setStyle(t,n,r,i)}removeStyle(t,n,r){this.delegate.removeStyle(t,n,r)}setProperty(t,n,r){"@"==n.charAt(0)&&n==jw?this.disableAnimations(t,!!r):this.delegate.setProperty(t,n,r)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,r){return this.delegate.listen(t,n,r)}disableAnimations(t,n){this.engine.disableAnimations(t,n)}}class hL extends $w{constructor(t,n,r,i,s){super(n,r,i,s),this.factory=t,this.namespaceId=n}setProperty(t,n,r){"@"==n.charAt(0)?"."==n.charAt(1)&&n==jw?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,n.slice(1),r):this.delegate.setProperty(t,n,r)}listen(t,n,r){if("@"==n.charAt(0)){const i=function pL(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(t);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function gL(e){const t=e.indexOf(".");return[e.substring(0,t),e.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(t,n,r)}}const Bw=[{provide:sw,useClass:uL},{provide:Cf,useFactory:function yL(){return new FF}},{provide:Xa,useClass:(()=>{class e extends Xa{constructor(n,r,i,s){super(n.body,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||e)(F(fn),F(hf),F(Cf),F(ai))};static#t=this.\u0275prov=q({token:e,factory:e.\u0275fac})}return e})()},{provide:ts,useFactory:function vL(e,t,n){return new fL(e,t,n)},deps:[Od,Xa,le]}],Pf=[{provide:hf,useFactory:()=>new lL},{provide:Lg,useValue:"BrowserAnimations"},...Bw],Vw=[{provide:hf,useClass:gw},{provide:Lg,useValue:"NoopAnimations"},...Bw];let _L=(()=>{class e{static withConfig(n){return{ngModule:e,providers:n.disableAnimations?Vw:Pf}}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=hr({type:e});static#n=this.\u0275inj=Bn({providers:Pf,imports:[MD]})}return e})(),DL=(()=>{class e{constructor(n,r){this.databaseService=n,this.blockService=r,this.turn=0,this.blockService.numberOfTurns.subscribe(i=>this.turn=i)}ngOnInit(){var n=this;return v(function*(){n.turn=(yield n.databaseService.getTurns()).turns[0].turns})()}getActivePlayer(){return this.turn%2==0?"Player 1's turn":"Player 2's turn"}static#e=this.\u0275fac=function(r){return new(r||e)(M(vi),M(Os))};static#t=this.\u0275cmp=fr({type:e,selectors:[["app-turn"]],decls:2,vars:1,template:function(r,i){1&r&&(ye(0,"p"),Yn(1),ve()),2&r&&(rt(1),oa(i.getActivePlayer()))}})}return e})(),wL=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=hr({type:e,bootstrap:[af]});static#n=this.\u0275inj=Bn({imports:[MD,_L]})}return e})();(function Ih(e,t,n){const r=e.\u0275cmp;r.directiveDefs=no(t,!1),r.pipeDefs=no(n,!0)})(af,[gR,bR,ER,DL],[]),_x().bootstrapModule(wL).catch(e=>console.error(e))},470:(Bs,Di,Ee)=>{Ee.r(Di),Ee.d(Di,{Headers:()=>Je,Request:()=>Vs,Response:()=>Hs,default:()=>cr,fetch:()=>wi});var Zt=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}();const wi=Zt.fetch,cr=Zt.fetch.bind(Zt),Je=Zt.Headers,Vs=Zt.Request,Hs=Zt.Response}},Bs=>{Bs(Bs.s=774)}]);